## AppleMediaServices

> `/System/Library/PrivateFrameworks/AppleMediaServices.framework/AppleMediaServices`

```diff

-8.2.10.0.0
-  __TEXT.__text: 0x7f0c98
+8.2.19.0.0
+  __TEXT.__text: 0x7f4c08
   __TEXT.__auth_stubs: 0x44b0
-  __TEXT.__objc_methlist: 0x1e2a0
-  __TEXT.__cstring: 0x27225
-  __TEXT.__const: 0x5d814
-  __TEXT.__swift5_typeref: 0x37ef
-  __TEXT.__swift5_reflstr: 0x1b48
+  __TEXT.__objc_methlist: 0x1e478
+  __TEXT.__cstring: 0x27858
+  __TEXT.__const: 0x5d804
+  __TEXT.__swift5_typeref: 0x38c5
+  __TEXT.__swift5_reflstr: 0x1b78
   __TEXT.__swift5_assocty: 0x978
-  __TEXT.__constg_swiftt: 0x2784
+  __TEXT.__constg_swiftt: 0x277c
   __TEXT.__swift5_builtin: 0x1f4
-  __TEXT.__swift5_fieldmd: 0x213c
-  __TEXT.__swift5_proto: 0x694
+  __TEXT.__swift5_fieldmd: 0x2148
+  __TEXT.__swift5_proto: 0x690
   __TEXT.__swift5_types: 0x2c4
-  __TEXT.__swift5_capture: 0x1a0c
+  __TEXT.__swift5_capture: 0x1a44
   __TEXT.__swift5_mpenum: 0x48
   __TEXT.__swift5_protos: 0x70
-  __TEXT.__oslogstring: 0x2cf38
-  __TEXT.__gcc_except_tab: 0x16ebc
+  __TEXT.__oslogstring: 0x2d140
+  __TEXT.__gcc_except_tab: 0x16ecc
   __TEXT.__dlopen_cstrs: 0x8d3
   __TEXT.__ustring: 0x1b2
-  __TEXT.__unwind_info: 0x117e0
-  __TEXT.__eh_frame: 0xc1f8
-  __TEXT.__objc_classname: 0x3a59
-  __TEXT.__objc_methname: 0x3f5c2
-  __TEXT.__objc_methtype: 0x6ec4
-  __TEXT.__objc_stubs: 0x2c460
-  __DATA_CONST.__got: 0x1808
-  __DATA_CONST.__const: 0xbdf8
-  __DATA_CONST.__objc_classlist: 0x1210
+  __TEXT.__unwind_info: 0x119b0
+  __TEXT.__eh_frame: 0xc4c0
+  __TEXT.__objc_classname: 0x3a83
+  __TEXT.__objc_methname: 0x3f8be
+  __TEXT.__objc_methtype: 0x6f82
+  __TEXT.__objc_stubs: 0x2c5a0
+  __DATA_CONST.__got: 0x1820
+  __DATA_CONST.__const: 0xbe20
+  __DATA_CONST.__objc_classlist: 0x1218
   __DATA_CONST.__objc_catlist: 0xf8
   __DATA_CONST.__objc_protolist: 0x350
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_selrefs: 0xdfc0
+  __DATA_CONST.__objc_selrefs: 0xe060
   __DATA_CONST.__objc_protorefs: 0x170
-  __DATA_CONST.__objc_superrefs: 0xc30
-  __DATA_CONST.__objc_arraydata: 0x4f0
+  __DATA_CONST.__objc_superrefs: 0xc38
+  __DATA_CONST.__objc_arraydata: 0x518
   __AUTH_CONST.__auth_got: 0x2270
-  __AUTH_CONST.__auth_ptr: 0xa10
-  __AUTH_CONST.__const: 0x29cf8
-  __AUTH_CONST.__cfstring: 0x20240
-  __AUTH_CONST.__objc_const: 0x39a18
+  __AUTH_CONST.__auth_ptr: 0xa08
+  __AUTH_CONST.__const: 0x29df8
+  __AUTH_CONST.__cfstring: 0x20580
+  __AUTH_CONST.__objc_const: 0x39cd8
   __AUTH_CONST.__objc_intobj: 0xc78
-  __AUTH_CONST.__objc_arrayobj: 0xf0
+  __AUTH_CONST.__objc_arrayobj: 0x108
   __AUTH_CONST.__objc_dictobj: 0x118
   __AUTH_CONST.__objc_doubleobj: 0x10
-  __AUTH.__objc_data: 0x7570
-  __AUTH.__data: 0xf98
+  __AUTH.__objc_data: 0x7470
+  __AUTH.__data: 0xea8
   __AUTH.__thread_vars: 0x30
   __AUTH.__thread_bss: 0x5
-  __DATA.__objc_ivar: 0x1760
-  __DATA.__data: 0x5490
-  __DATA.__bss: 0xa711
-  __DATA.__common: 0xb58
-  __DATA_DIRTY.__objc_ivar: 0x640
-  __DATA_DIRTY.__objc_data: 0x52a8
-  __DATA_DIRTY.__data: 0x19e0
-  __DATA_DIRTY.__bss: 0x33e0
-  __DATA_DIRTY.__common: 0x78
+  __DATA.__objc_ivar: 0x176c
+  __DATA.__data: 0x5580
+  __DATA.__bss: 0xa319
+  __DATA.__common: 0xb48
+  __DATA_DIRTY.__objc_ivar: 0x64c
+  __DATA_DIRTY.__objc_data: 0x53e0
+  __DATA_DIRTY.__data: 0x1a00
+  __DATA_DIRTY.__bss: 0x3770
+  __DATA_DIRTY.__common: 0x88
   - /System/Library/Frameworks/Accounts.framework/Accounts
   - /System/Library/Frameworks/CFNetwork.framework/CFNetwork
   - /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation

   - /usr/lib/swift/libswiftMetal.dylib
   - /usr/lib/swift/libswiftObjectiveC.dylib
   - /usr/lib/swift/libswiftQuartzCore.dylib
+  - /usr/lib/swift/libswiftSynchronization.dylib
   - /usr/lib/swift/libswiftXPC.dylib
   - /usr/lib/swift/libswift_Builtin_float.dylib
   - /usr/lib/swift/libswift_Concurrency.dylib

   - /usr/lib/swift/libswiftsimd.dylib
   - /usr/lib/swift/libswiftsys_time.dylib
   - /usr/lib/swift/libswiftunistd.dylib
-  Functions: 21726
-  Symbols:   18999
-  CStrings:  19905
+  Functions: 21812
+  Symbols:   19060
+  CStrings:  19971
 
Symbols:
+ _AMSHTTPHeaderiCloudPartition
+ _OBJC_CLASS_$_AMSAccountCachedServerDataAccountResult
+ _OBJC_METACLASS_$_AMSAccountCachedServerDataAccountResult
+ _swift_runtimeSupportsNoncopyableTypes
CStrings:
+ "\x0e"
+ "\x12\x12\x13\"\x12"
+ "%!{(MISSING)public}@ [%!{(MISSING)public}@] Error fetching new fraud report score: %!{(MISSING)public}@."
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Attempting to sunset CID: %!{(MISSING)public}@"
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Checking if we should sunset CID: %!{(MISSING)public}@, interval: %!{(MISSING)public}@"
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Cleared CID expiry in db: %!{(MISSING)public}@"
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] No result found for account %!{(MISSING)public}@. error = %!{(MISSING)public}@"
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Running unit tests. We won't go to the network to fetch bags. Unit tests should use mocked bags."
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Starting metrics identifier fetch. %!{(MISSING)public}@"
+ "%!{(MISSING)public}@Biometrics signature failed. Error: %!{(MISSING)public}@"
+ "%!{(MISSING)public}@Falling back to password."
+ "%!{(MISSING)public}@Received touch ID action: %!{(MISSING)public}@"
+ "%!{(MISSING)public}@Successfully signed extended action."
+ "%!{(MISSING)public}@Using payment sheet task class from taskInfo properties: %!{(MISSING)public}@"
+ "(!##"
+ "@\"AMSAccountCachedServerDataFields\""
+ "@16@?0@\"NSSet\"8"
+ "@52@0:8@16@24C32@36^@44"
+ "@56@0:8@16C24C28@32@40@48"
+ "A different `userId` was detected in `%!@(MISSING)` clickstream data in the `userId` field, following multiple earlier `userId` values for the same `clientId`. It appears that the `userId` has unexpectedly flipped more than once, since `%!@(MISSING)` userIds should not rotate for a given clientId. One rotation can occur due to initial conflict resolution, but not multiple. \nLogKey: %!@(MISSING), \nCurrent userId: %!@(MISSING), \nLast userId: %!@(MISSING), \neventTime: %!@(MISSING)"
+ "AMSAccountCachedServerDataAccountResult"
+ "AMSTTRMetricsClickStreamUserIdHistory"
+ "B24@?0@\"NSHTTPCookie\"8@\"NSHTTPCookie\"16"
+ "BagURLQueryItemsBuilder: ["
+ "Expected either value or an error."
+ "Failed to decode evaluated element string in fraud score report response body"
+ "Failed to decode proof string in fraud score report response body"
+ "Failed to map iOS/visionOS device to a device class."
+ "FraudScoreReportResponseValidation"
+ "Namespace in fraud score report response body differs from sent namespace"
+ "No evaluated element in fraud score report response body"
+ "No namespace in fraud score report response body"
+ "No ns in fraud score report response body"
+ "No proof in fraud score report response body"
+ "No rs in fraud score report response body"
+ "Ns value in fraud score report response body is out of permitted range"
+ "Rs value in fraud score report response body differs from sent rs value"
+ "Rs value in fraud score report response body is out of permitted range"
+ "Running unit test"
+ "T@\"AMSAccountCachedServerDataFields\",&,N,V_fields"
+ "T@\"NSData\",R,N,V_evaluatedElementData"
+ "T@\"NSData\",R,N,V_proofData"
+ "T@\"NSDictionary\",&,N,V_allAccountResults"
+ "T@\"NSString\",R,N,V_finalizedElement"
+ "T@\"NSString\",R,N,V_keyID"
+ "T@,&,N,V_presentingWindow"
+ "Tq,R,N,V_newScore"
+ "Tq,R,N,V_reportedScore"
+ "[%!@(MISSING)] Device-generated KID flip-flop detected in App Store clickstream"
+ "[%!@(MISSING)] Unexpected userId change detected in `%!@(MISSING)` clickstream"
+ "_allAccountResults"
+ "_currentTreatmentsForAreas:"
+ "_evaluatedElementData"
+ "_fields"
+ "_presentingWindow"
+ "_proofData"
+ "_requestForURL:tokenService:"
+ "_setFinalizedElement:"
+ "_showTTRWithEvent:"
+ "_treatmentOverridesForAreas:"
+ "accountAuthSyncForAccountID:"
+ "accountAuthSyncForAccountID:completionHandler:"
+ "accountAuthSyncForAccountID:reply:"
+ "allAccountResults"
+ "ams_compactMapValues:"
+ "ams_iCloudPartition"
+ "com.apple.Dataclass.Quota"
+ "decodeCGSizeForKey:"
+ "deviceIsComputeModule"
+ "dictionary and expectedNamespace must all be non-nil"
+ "differenceFromArray:withOptions:usingEquivalenceTest:"
+ "encodeCGSize:forKey:"
+ "evaluatedElementData"
+ "fetchMetricsIdentifiers"
+ "initWithNamespace:reportedScore:newScore:evaluatedElementData:proofData:keyID:"
+ "initWithResponseDictionary:expectedNamespace:expectedReportedScore:keyID:error:"
+ "initWithoutBag"
+ "kError"
+ "kFields"
+ "nameSpace, evaluatedElementData and proofData must all be non-nil"
+ "partition"
+ "paymentAuthorizationController:didRequestMerchantSessionWithURL:merchantSessionUpdate:"
+ "presentingWindow"
+ "proofData"
+ "propertiesForDataclass:"
+ "rs=%!h(MISSING)hu;ns=%!h(MISSING)hu"
+ "setAllAccountResults:"
+ "setFields:"
+ "setPresentingWindow:"
+ "setTtrMetricsClickStreamUserIdHistory:"
+ "ttrMetricsClickStreamUserIdHistory"
+ "userIds"
+ "v32@0:8@\"AMSAccountIdentity\"16@?<v@?@\"NSError\">24"
+ "v40@0:8@\"PKPaymentAuthorizationController\"16@\"NSURL\"24@?<v@?@\"PKPaymentRequestMerchantSessionUpdate\">32"
+ "x-apple-icloud-partition"
+ "xp_amp_app_usage_arcade"
+ "xp_amp_podcasts_main"
+ "xp_amp_podcasts_play"
+ "xp_ase_arcade_subs"
- "\x12\x12\x13\"\x11"
- "%!{(MISSING)public}@ [%!{(MISSING)public}@] Biometrics signature failed. Error: %!{(MISSING)public}@"
- "%!{(MISSING)public}@ [%!{(MISSING)public}@] Falling back to password."
- "%!{(MISSING)public}@ [%!{(MISSING)public}@] Successfully signed extended action."
- "%!{(MISSING)public}@: [%!{(MISSING)public}@] Error disabling biometrics keys: %!{(MISSING)public}@"
- "%!{(MISSING)public}@: [%!{(MISSING)public}@] Received touch ID action: %!{(MISSING)public}@"
- "(!\"#"
- "@\"AMSMarketingItem\"16@?0^@8"
- "@\"NSArray\"16@?0^@8"
- "AMSAppStoreClickStreamClientId"
- "AMSAppStoreClickStreamUserIdHistory"
- "AppleMediaServices/BagURLQueryItemsBuilder.swift"
- "Device-generated KID flip-flop detected in App Store clickstream"
- "Failed to map iOS device to device string."
- "T@\"NSDictionary\",&,N,V_allAccountData"
- "T@\"NSString\",&,N,V_evaluatedElement"
- "T@\"NSString\",&,N,V_finalizedElement"
- "T@\"NSString\",&,N,V_keyID"
- "T@\"NSString\",&,N,V_nameSpace"
- "T@\"NSString\",&,N,V_proof"
- "Tq,N,V_newScore"
- "Tq,N,V_reportedScore"
- "_allAccountData"
- "_evaluatedElement"
- "_proof"
- "_showAppStoreTTRWithEvent:"
- "allAccountData"
- "appStoreClickStreamClientId"
- "appStoreClickStreamUserIdHistory"
- "canaryIdenifier"
- "differenceFromArray:"
- "initWithDictionary:keyID:"
- "rs=%!l(MISSING)d;ns=%!l(MISSING)d"
- "setAllAccountData:"
- "setAppStoreClickStreamClientId:"
- "setAppStoreClickStreamUserIdHistory:"

```
