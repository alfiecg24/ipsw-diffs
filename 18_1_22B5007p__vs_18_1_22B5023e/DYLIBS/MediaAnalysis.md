## MediaAnalysis

> `/System/Library/PrivateFrameworks/MediaAnalysis.framework/MediaAnalysis`

```diff

-285.0.11.2.0
-  __TEXT.__text: 0x3f46e0
+285.2.1.0.0
+  __TEXT.__text: 0x3f7814
   __TEXT.__auth_stubs: 0x3570
-  __TEXT.__objc_methlist: 0x192b4
+  __TEXT.__objc_methlist: 0x193f4
   __TEXT.__const: 0x13f98
-  __TEXT.__gcc_except_tab: 0x522c0
-  __TEXT.__cstring: 0x1e163
-  __TEXT.__oslogstring: 0x2393b
+  __TEXT.__gcc_except_tab: 0x5272c
+  __TEXT.__cstring: 0x1e5c3
+  __TEXT.__oslogstring: 0x23eab
   __TEXT.__dlopen_cstrs: 0x579
   __TEXT.__ustring: 0x40
   __TEXT.__swift5_typeref: 0x9c

   __TEXT.__swift5_fieldmd: 0x44
   __TEXT.__swift5_proto: 0xc
   __TEXT.__swift5_types: 0xc
-  __TEXT.__unwind_info: 0xfb68
+  __TEXT.__unwind_info: 0xfbf8
   __TEXT.__eh_frame: 0x1e0
-  __TEXT.__objc_classname: 0x3b0e
-  __TEXT.__objc_methname: 0x3882a
-  __TEXT.__objc_methtype: 0xca1b
-  __TEXT.__objc_stubs: 0x26300
-  __DATA_CONST.__got: 0x18e8
-  __DATA_CONST.__const: 0x5d10
-  __DATA_CONST.__objc_classlist: 0x1060
+  __TEXT.__objc_classname: 0x3b6e
+  __TEXT.__objc_methname: 0x38a21
+  __TEXT.__objc_methtype: 0xca8e
+  __TEXT.__objc_stubs: 0x26480
+  __DATA_CONST.__got: 0x18d8
+  __DATA_CONST.__const: 0x5e10
+  __DATA_CONST.__objc_classlist: 0x1078
   __DATA_CONST.__objc_catlist: 0x198
   __DATA_CONST.__objc_protolist: 0x120
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_selrefs: 0xb6a0
+  __DATA_CONST.__objc_selrefs: 0xb710
   __DATA_CONST.__objc_protorefs: 0x58
-  __DATA_CONST.__objc_superrefs: 0xda8
-  __DATA_CONST.__objc_arraydata: 0xfd0
+  __DATA_CONST.__objc_superrefs: 0xdb0
+  __DATA_CONST.__objc_arraydata: 0x1060
   __AUTH_CONST.__auth_got: 0x1ad0
   __AUTH_CONST.__auth_ptr: 0x108
-  __AUTH_CONST.__const: 0x55b8
-  __AUTH_CONST.__cfstring: 0x145a0
-  __AUTH_CONST.__objc_const: 0x35068
+  __AUTH_CONST.__const: 0x55f8
+  __AUTH_CONST.__cfstring: 0x14880
+  __AUTH_CONST.__objc_const: 0x353b0
   __AUTH_CONST.__objc_floatobj: 0x250
   __AUTH_CONST.__objc_doubleobj: 0x400
-  __AUTH_CONST.__objc_intobj: 0x2a90
-  __AUTH_CONST.__objc_arrayobj: 0xa98
+  __AUTH_CONST.__objc_intobj: 0x2aa8
+  __AUTH_CONST.__objc_arrayobj: 0xae0
   __AUTH_CONST.__objc_dictobj: 0xc8
-  __AUTH.__objc_data: 0x1108
-  __AUTH.__data: 0x28
+  __AUTH.__objc_data: 0xf0
   __AUTH.__thread_vars: 0x30
   __AUTH.__thread_bss: 0x9c9
-  __DATA.__objc_ivar: 0x2f5c
+  __DATA.__objc_ivar: 0x2f78
   __DATA.__data: 0x1898
-  __DATA.__bss: 0xa69
+  __DATA.__bss: 0x919
   __DATA.__common: 0x3b9
-  __DATA_DIRTY.__objc_data: 0x93b8
-  __DATA_DIRTY.__data: 0x160
-  __DATA_DIRTY.__bss: 0x720
+  __DATA_DIRTY.__objc_data: 0xa4c0
+  __DATA_DIRTY.__data: 0x188
+  __DATA_DIRTY.__bss: 0x868
   - /System/Library/Frameworks/AVFAudio.framework/AVFAudio
   - /System/Library/Frameworks/AVFoundation.framework/AVFoundation
   - /System/Library/Frameworks/Accelerate.framework/Accelerate

   - /usr/lib/swift/libswiftObjectiveC.dylib
   - /usr/lib/swift/libswiftUniformTypeIdentifiers.dylib
   - /usr/lib/swift/libswiftXPC.dylib
+  - /usr/lib/swift/libswift_Builtin_float.dylib
+  - /usr/lib/swift/libswift_errno.dylib
+  - /usr/lib/swift/libswift_math.dylib
+  - /usr/lib/swift/libswift_signal.dylib
+  - /usr/lib/swift/libswift_stdio.dylib
+  - /usr/lib/swift/libswift_time.dylib
   - /usr/lib/swift/libswiftos.dylib
-  Functions: 15118
-  Symbols:   18949
-  CStrings:  17246
+  - /usr/lib/swift/libswiftsys_time.dylib
+  - /usr/lib/swift/libswiftunistd.dylib
+  Functions: 15162
+  Symbols:   19006
+  CStrings:  17327
 
Symbols:
+ _MediaAnalysisEmbeddingChangedVersion
+ _MediaAnalysisEmbeddingForwardCompatibleVersion
+ _VCPKeyValueMediaAnalysisImagePriority1TotalAssetCount
+ _VCPLastBGSTProgressReportAttemptKeyForTask
+ _VCPRequestBGSTProgressReportKeyForTask
+ __swift_FORCE_LOAD_$_swift_Builtin_float
+ __swift_FORCE_LOAD_$_swift_errno
+ __swift_FORCE_LOAD_$_swift_math
+ __swift_FORCE_LOAD_$_swift_signal
+ __swift_FORCE_LOAD_$_swift_stdio
+ __swift_FORCE_LOAD_$_swift_time
+ __swift_FORCE_LOAD_$_swiftsys_time
+ __swift_FORCE_LOAD_$_swiftunistd
- _OBJC_CLASS_$_CLLocationManager
- _PHAssetPropertySetGeneratedAssetDescription
CStrings:
+ "\x04!"
+ "%!@(MISSING) Failed to query delta embedding count, skip index rebuild: %!@(MISSING)"
+ "%!@(MISSING) delta embedding count %!l(MISSING)u less than force limit %!l(MISSING)u; skip index rebuild"
+ "%!@(MISSING) delta embedding count %!l(MISSING)u less than limit %!l(MISSING)u; skip index rebuild"
+ "%!@(MISSING)[VSKStatistics] deltaStoreCount: %!d(MISSING), storeCount: %!d(MISSING)"
+ "-[VCPDatabaseReader querySchedulingHistoryRecords:forActivityID:startDate:endDate:]"
+ "-[VCPDatabaseReader querySchedulingHistoryRecords:startDate:endDate:]"
+ "/Library/Caches/com.apple.xbs/Sources/MediaAnalysis/MediaAnalysis/Text/MADTextEmbeddingSafety.mm"
+ "@\"MADTextEmbeddingSafety\""
+ "@52@0:8@16r^{?={?=qiIq}{?=qiIq}}24Q32^f40B48"
+ "@56@0:8@16Q24@32@?40@?48"
+ "Applying prompt adjustment at index %!l(MISSING)u"
+ "B80@0:8^Q16^Q24^Q32Q40Q48Q56Q64^@72"
+ "CSUImageCaptioner_AX_CSU"
+ "CSUImageCaptioner_MiCa"
+ "CSUImageCaptioner_MiCa_SafeCaption"
+ "CSUVideoCaptioner_MiCa"
+ "Creating safety model (MD%!d(MISSING))"
+ "Entity should not be the first segment"
+ "FaceAnalysisLastBGSTProgressReportAttempt"
+ "FaceAnalysisRequestBGSTProgressReport"
+ "Failed to create embedding safety"
+ "Failed to prewarm text embedding safety"
+ "Failed to prewarm text embedding safety"
+ "MADGenerativePlaygroundsMD5TextEncoderResource"
+ "MADTextEmbeddingSafety"
+ "MADTextEmbeddingSafety"
+ "MADTextEmbeddingSafety"
+ "MADTextEmbeddingSafetyMD5"
+ "MADTextEmbeddingSafety_create"
+ "MADTextEmbeddingSafety_loadResources"
+ "MAD_VSKStatistics"
+ "MediaAnalysisImagePriority1TotalAssetCount"
+ "MediaAnalysisLastBGSTProgressReportAttempt"
+ "MediaAnalysisRequestBGSTProgressReport"
+ "OCRAnalysisLastBGSTProgressReportAttempt"
+ "OCRAnalysisRequestBGSTProgressReport"
+ "PECAnalysisLastBGSTProgressReportAttempt"
+ "PECAnalysisRequestBGSTProgressReport"
+ "SELECT activityID, startTime, duration, exitStatus, sessionLog FROM BackgroundActivitySchedulingHistory WHERE activityID=(?) AND startTime>=(?) AND startTime<=(?);"
+ "SELECT activityID, startTime, duration, exitStatus, sessionLog FROM BackgroundActivitySchedulingHistory WHERE startTime>=(?) AND startTime<=(?);"
+ "Safety only supported for MD5"
+ "SceneAnalysisLastBGSTProgressReportAttempt"
+ "SceneAnalysisRequestBGSTProgressReport"
+ "Score: %!f(MISSING)  Threshold: %!f(MISSING)  Safe: %!d(MISSING)"
+ "Splitted string firstHalf (%!@(MISSING))"
+ "Splitted string secondHalf (%!@(MISSING))"
+ "T@\"MADTextEmbeddingSafety\",R,N"
+ "T@\"VSKClient\",R,N,V_client"
+ "TB,R,N,V_hasMigration"
+ "TB,R,V_enableStyle"
+ "Text embedding safety failed"
+ "VisualSearchAnalysisLastBGSTProgressReportAttempt"
+ "VisualSearchAnalysisRequestBGSTProgressReport"
+ "WriteSpatialEmbeddingToFile"
+ "WriteSpatialEmbeddingToFile %!s(MISSING) enabled"
+ "[%!@(MISSING)] Ineligible for compute sync downalod with taskID %!d(MISSING)"
+ "[%!@(MISSING)] Unsupported taskID (%!d(MISSING)), ineligible for compute sync analysis download"
+ "[%!@(MISSING)] missing MediaAnalysisProperties, ineligible for compute sync analysis download"
+ "[ImageCaption] Failed to create directory %!@(MISSING) with error: %!@(MISSING)"
+ "[ImageCaption] Failed to save image spatial embedding to %!@(MISSING) with error: %!@(MISSING)"
+ "[ImageCaption] Image spatial embedding successfully saved to %!@(MISSING)"
+ "[ImageCaption] VCPMobileAsset_ImageCaption_AX_CSU model download failed"
+ "[MADVectorDatabaseManager] Embedding generation disabled, skip vector database creation"
+ "[TextEncoderInputs] Final personalizationIndex %!d(MISSING), textEncoderInputs.count: %!d(MISSING)"
+ "[TextEncoderInputs][%!l(MISSING)u] %!@(MISSING)"
+ "[TextEncoderOutput.Segments][%!l(MISSING)u] %!@(MISSING)"
+ "[Text|Safety] Embedding size (%!@(MISSING)) is not supported"
+ "[Text|Safety] Embedding type (%!@(MISSING)) is not supported"
+ "[Text|Safety] Embedding version %!d(MISSING) not supported"
+ "[Text|Safety] Embedding version (%!@(MISSING)) is not supported"
+ "[Text|Safety] Failed to create ANE context"
+ "[Text|Safety] Failed to create input buffer"
+ "[Text|Safety] Failed to destroy context"
+ "[Text|Safety] Failed to destroy plan"
+ "[Text|Safety] Failed to execute network"
+ "[Text|Safety] Failed to load network"
+ "[VideoCaption] Failed to create directory %!@(MISSING) with error: %!@(MISSING)"
+ "[VideoCaption] Failed to save video spatial embedding to %!@(MISSING) with error: %!@(MISSING)"
+ "[VideoCaption] Video spatial embedding successfully saved to %!@(MISSING)"
+ "_hasMigration"
+ "_outputBuffer"
+ "_processEmbedding:safetyScore:isSafe:"
+ "_safety"
+ "client"
+ "cloudAnalysisStage"
+ "computeSafety"
+ "createDecoderForTrack:timerange:forAnalysisTypes:decodedFrameRate:withLossySetting:"
+ "databaseWithURL:"
+ "deltaStoreCount"
+ "enableStyle"
+ "hasMigration"
+ "i40@0:8@16^f24^B32"
+ "i40@0:8^@16@24@32"
+ "i48@0:8^@16Q24@32@40"
+ "imageSpatialEmbedding.dat"
+ "initWithAssets:analysisTypes:options:progressHandler:andCompletionHandler:"
+ "initWithDatabaseURL:"
+ "initWithSceneAnalysisVersion:faceAnalysisVersion:characterRecognitionAlgorithmVersion:visualSearchAlgorithmVersion:stickerConfidenceAlgorithmVersion:vaAnalysisVersion:vaLocationAnalysisVersion:mediaAnalysisVersion:mediaAnalysisImageVersion:captionGenerationVersion:imageEmbeddingVersion:videoEmbeddingVersion:"
+ "mad_calculateProgressPercentage:totalAssetCount:progressPercentageWithFailure:taskID:phTaskID:priority:failedAssetCount:error:"
+ "mad_isEligibleForComputeSyncDownloadWithAnalysisTask:"
+ "processEmbedding:safetyScore:isSafe:"
+ "querySchedulingHistoryRecords:forActivityID:startDate:endDate:"
+ "querySchedulingHistoryRecords:startDate:endDate:"
+ "queryVUIndexLastFullModeClusterDateWithPhotoLibraryURL:reply:"
+ "safety"
+ "setSafetyScore:isSafe:"
+ "statisticsWithError:"
+ "taskWithAsset:andAnalysisTypes:andOptions:andProgressHandler:andCompletionHandler:"
+ "text_safety_md5.espresso.net"
+ "tokenID"
+ "v32@0:8@\"NSURL\"16@?<v@?@\"NSDate\"@\"NSError\">24"
+ "v32@?0@\"CSUTextEncoderInput\"8Q16^B24"
+ "v32@?0@\"NSValue\"8Q16^B24"
+ "vcp_fullAnalysisImageOnlyTypes"
+ "videoSpatialEmbedding.dat"
+ "writeSpatialEmbeddingToFile"
- "\x04\""
- "   [%!@(MISSING)] Ignoring analysis results for Montage asset"
- "%!@(MISSING) Ignoring analysis results for Montage asset"
- "%!@(MISSING) delta asset count %!l(MISSING)u less than force limit %!l(MISSING)u; skip index rebuild"
- "%!@(MISSING) delta asset count %!l(MISSING)u less than limit %!l(MISSING)u; skip index rebuild"
- "-[VCPDatabaseReader querySchedulingHistoryRecords:forActivityID:sinceDate:]"
- "-[VCPDatabaseReader querySchedulingHistoryRecords:sinceDate:]"
- "@48@0:8@16r^{?={?=qiIq}{?=qiIq}}24Q32^f40"
- "@64@0:8@16Q24@32@?40@?48@?56"
- "Applying prompt adjustment"
- "B72@0:8^Q16^Q24Q32Q40Q48Q56^@64"
- "CSUImageCaptioner_AX_v1"
- "CSUImageCaptioner_MiCa_v4_inbuild"
- "CSUVideoCaptioner_MiCa_v4_inbuild"
- "Key %!@(MISSING) does not exist for appID %!@(MISSING), defaulting to Location Services toggle value"
- "SELECT activityID, startTime, duration, exitStatus, sessionLog FROM BackgroundActivitySchedulingHistory WHERE activityID=(?) AND startTime>=(?);"
- "SELECT activityID, startTime, duration, exitStatus, sessionLog FROM BackgroundActivitySchedulingHistory WHERE startTime>=(?);"
- "Skip text input in first round ... "
- "[%!@(MISSING)] Montage asset detected"
- "[ImageCaption] CSUAXCaptioner download failed"
- "[ImageCaption] Failed to create CSUImageCaptionerConfiguration: (%!s(MISSING))"
- "_deltaAssetCount"
- "_petWatchDog"
- "createDecoderForTrack:timerange:forAnalysisTypes:decodedFrameRate:"
- "firstHalf (%!@(MISSING))"
- "i40@0:8^@16Q24@32"
- "initWithAssets:analysisTypes:options:petWatchDog:progressHandler:andCompletionHandler:"
- "initWithSceneAnalysisVersion:imageEmbeddingVersion:faceAnalysisVersion:characterRecognitionAlgorithmVersion:visualSearchAlgorithmVersion:stickerConfidenceAlgorithmVersion:vaAnalysisVersion:vaLocationAnalysisVersion:mediaAnalysisVersion:mediaAnalysisImageVersion:captionGenerationVersion:"
- "locationServicesEnabled"
- "mad_calculateProgressPercentage:progressPercentageWithFailure:taskID:phTaskID:priority:failedAssetCount:error:"
- "querySchedulingHistoryRecords:forActivityID:sinceDate:"
- "querySchedulingHistoryRecords:sinceDate:"
- "secondHalf (%!@(MISSING))"
- "setExcludeMontageAssets:"
- "taskWithAsset:andAnalysisTypes:andOptions:andPetWatchDog:andProgressHandler:andCompletionHandler:"
- "vcp_isMontageWithTaskID:"

```
