## VectorSearch

> `/System/Library/PrivateFrameworks/VectorSearch.framework/VectorSearch`

```diff

-25.0.0.0.0
-  __TEXT.__text: 0x632f0
-  __TEXT.__auth_stubs: 0x1ab0
-  __TEXT.__objc_methlist: 0x81c
-  __TEXT.__const: 0x1eb8
-  __TEXT.__cstring: 0x3db3
-  __TEXT.__constg_swiftt: 0xefc
-  __TEXT.__swift5_typeref: 0x10b8
-  __TEXT.__swift5_fieldmd: 0xc7c
+27.0.2.0.0
+  __TEXT.__text: 0x5f8d4
+  __TEXT.__auth_stubs: 0x1af0
+  __TEXT.__objc_methlist: 0x83c
+  __TEXT.__const: 0x1e60
+  __TEXT.__cstring: 0x41e3
+  __TEXT.__constg_swiftt: 0xec8
+  __TEXT.__swift5_typeref: 0xe76
   __TEXT.__swift5_builtin: 0x8c
-  __TEXT.__swift5_reflstr: 0xa97
-  __TEXT.__swift5_capture: 0x4e4
+  __TEXT.__swift5_reflstr: 0xae5
+  __TEXT.__swift5_fieldmd: 0xc60
+  __TEXT.__swift5_types: 0xe0
+  __TEXT.__swift5_capture: 0x47c
   __TEXT.__swift5_proto: 0x184
-  __TEXT.__swift5_types: 0xe4
-  __TEXT.__oslogstring: 0xdd8
+  __TEXT.__oslogstring: 0xcf8
   __TEXT.__swift5_protos: 0x1c
-  __TEXT.__swift5_assocty: 0x68
+  __TEXT.__swift5_assocty: 0x30
   __TEXT.__swift5_mpenum: 0x34
-  __TEXT.__unwind_info: 0x1558
-  __TEXT.__eh_frame: 0x3788
+  __TEXT.__unwind_info: 0x1500
+  __TEXT.__eh_frame: 0x3638
   __TEXT.__objc_classname: 0xa6
-  __TEXT.__objc_methname: 0x152b
-  __TEXT.__objc_methtype: 0x4a6
-  __TEXT.__objc_stubs: 0x720
-  __DATA_CONST.__got: 0x2c0
-  __DATA_CONST.__const: 0x80
+  __TEXT.__objc_methname: 0x16dd
+  __TEXT.__objc_methtype: 0x4c0
+  __TEXT.__objc_stubs: 0x7a0
+  __DATA_CONST.__got: 0x2d0
+  __DATA_CONST.__const: 0xc0
   __DATA_CONST.__objc_classlist: 0xf0
   __DATA_CONST.__objc_protolist: 0x8
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_selrefs: 0x3a8
+  __DATA_CONST.__objc_selrefs: 0x3c8
   __DATA_CONST.__objc_superrefs: 0x58
-  __AUTH_CONST.__auth_got: 0xd60
-  __AUTH_CONST.__auth_ptr: 0x490
-  __AUTH_CONST.__const: 0x1dd0
+  __AUTH_CONST.__auth_got: 0xd80
+  __AUTH_CONST.__auth_ptr: 0x450
+  __AUTH_CONST.__const: 0x1cc0
   __AUTH_CONST.__cfstring: 0x20
-  __AUTH_CONST.__objc_const: 0x19a0
+  __AUTH_CONST.__objc_const: 0x1a00
   __AUTH_CONST.__objc_intobj: 0x90
   __AUTH_CONST.__objc_floatobj: 0x10
-  __AUTH.__objc_data: 0x6b8
-  __AUTH.__data: 0x2c0
-  __DATA.__objc_ivar: 0x58
-  __DATA.__data: 0x7f0
-  __DATA.__bss: 0x1700
-  __DATA.__common: 0x8
-  __DATA_DIRTY.__objc_data: 0x480
-  __DATA_DIRTY.__data: 0xfd8
-  __DATA_DIRTY.__bss: 0x1300
-  __DATA_DIRTY.__common: 0x68
+  __AUTH.__objc_data: 0x340
+  __AUTH.__data: 0x248
+  __DATA.__objc_ivar: 0x60
+  __DATA.__data: 0x530
+  __DATA.__bss: 0x1780
+  __DATA_DIRTY.__objc_data: 0x7f8
+  __DATA_DIRTY.__data: 0x1128
+  __DATA_DIRTY.__bss: 0x1200
+  __DATA_DIRTY.__common: 0x70
   - /System/Library/Frameworks/Accelerate.framework/Accelerate
   - /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
+  - /System/Library/Frameworks/CryptoKit.framework/CryptoKit
   - /System/Library/Frameworks/Foundation.framework/Foundation
+  - /System/Library/PrivateFrameworks/CollectionsInternal.framework/CollectionsInternal
   - /System/Library/PrivateFrameworks/GRDBInternal.framework/GRDBInternal
   - /System/Library/PrivateFrameworks/RunningBoardServices.framework/RunningBoardServices
   - /usr/lib/libSystem.B.dylib

   - /usr/lib/swift/libswiftObjectiveC.dylib
   - /usr/lib/swift/libswiftQuartzCore.dylib
   - /usr/lib/swift/libswiftXPC.dylib
+  - /usr/lib/swift/libswift_Builtin_float.dylib
+  - /usr/lib/swift/libswift_errno.dylib
+  - /usr/lib/swift/libswift_math.dylib
+  - /usr/lib/swift/libswift_signal.dylib
+  - /usr/lib/swift/libswift_stdio.dylib
+  - /usr/lib/swift/libswift_time.dylib
   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsimd.dylib
-  Functions: 1707
-  Symbols:   229
-  CStrings:  602
+  - /usr/lib/swift/libswiftsys_time.dylib
+  - /usr/lib/swift/libswiftunistd.dylib
+  Functions: 1665
+  Symbols:   238
+  CStrings:  623
 
Symbols:
+ _BNNSDirectApplyTopK
+ __swift_FORCE_LOAD_$_swift_Builtin_float
+ __swift_FORCE_LOAD_$_swift_errno
+ __swift_FORCE_LOAD_$_swift_math
+ __swift_FORCE_LOAD_$_swift_signal
+ __swift_FORCE_LOAD_$_swift_stdio
+ __swift_FORCE_LOAD_$_swift_time
+ __swift_FORCE_LOAD_$_swiftsys_time
+ __swift_FORCE_LOAD_$_swiftunistd
+ _swift_stdlib_isStackAllocationSafe
+ _vDSP_maxvi
+ _vDSP_minvi
+ _vDSP_vdiv
+ _vDSP_vmma
+ _vDSP_vsmul
- _log2
- _swift_allocateGenericValueMetadata
- _vDSP_maxviD
- _vDSP_minviD
- _vDSP_vdivD
- _vDSP_vmmaD
CStrings:
+ "\x03"
+ "\x04"
+ "    ALTER TABLE attributes_temp RENAME TO attributes"
+ "    ALTER TABLE documents_temp RENAME TO documents"
+ "    ALTER TABLE observations_temp RENAME TO observations"
+ "    CREATE TABLE "
+ "    DROP TABLE attributes"
+ "    DROP TABLE attributes_fts"
+ "    DROP TABLE documents"
+ "    DROP TABLE identifiers"
+ "    DROP TABLE observations"
+ "    SELECT MIN(partition_size) AS min, max(partition_size) AS max, avg(partition_size) AS average\n    FROM (SELECT partition, count(1) AS partition_size\n          FROM observations\n          GROUP BY partition)"
+ "    SELECT f0.asset_id, f0.document\n    "
+ "    WHERE f0.asset_id in ("
+ " (\n        asset_id        TEXT PRIMARY KEY"
+ " (\n        asset_id        TEXT PRIMARY KEY,\n        document        BLOB\n    ) STRICT"
+ " (\n        asset_id TEXT PRIMARY KEY\n        "
+ " (\n        id INTEGER PRIMARY KEY AUTOINCREMENT\n    ) STRICT"
+ " (\n        partition       INTEGER NOT NULL,\n        id              INTEGER NOT NULL,\n        embedding       BLOB NOT NULL,\n        observationid   TEXT NOT NULL,\n        PRIMARY KEY (partition, id)\n    ) STRICT, WITHOUT ROWID;"
+ " (\n        partition       INTEGER NOT NULL,\n        id              INTEGER NOT NULL,\n        observationid   INTEGER NOT NULL,\n        embedding       BLOB NOT NULL,\n        PRIMARY KEY (partition, id)\n    ) STRICT"
+ " (\n        partition       INTEGER NOT NULL,\n        id              INTEGER NOT NULL,\n        observationid   TEXT NOT NULL,\n        embedding       BLOB NOT NULL,\n        PRIMARY KEY (partition, id)\n    ) STRICT, WITHOUT ROWID"
+ " (asset_id, document)\n    SELECT CAST(f1.asset_id AS TEXT), f0.document\n    FROM "
+ " (partition, id, embedding, observationid)\n    SELECT f0.partition, f0.id, f0.embedding, CAST(f1.asset_id AS TEXT)\n    FROM "
+ " AND f0.asset_id in ("
+ " as f0\n    INNER JOIN identifiers f1 ON f0.asset_id = f1.rowid"
+ " as f0\n    INNER JOIN identifiers f1 ON f0.observationid = f1.rowid"
+ "\". Delta count did not any statistics."
+ ")\n    SELECT CAST(f1.asset_id AS TEXT) "
+ ", but expected: "
+ "@48@0:8@16@24q32@40"
+ "@52@0:8@16@24@32B40^@44"
+ "@52@0:8@16@24@32B40^@44"
+ "@60@0:8q16q24i32d36q44q52"
+ "Found stored embedding of size: "
+ "Mismatched list size found."
+ "Row did not have all required fields: embedding, observationid, and partition"
+ "Row did not have all required fields: id"
+ "SELECT observationid, embedding, partition\nFROM "
+ "Td,N,V_averagePartitionSize"
+ "Ti,N,V_proposedAveragePartitionSize"
+ "Tq,N,V_maximumPartitionSize"
+ "Tq,N,V_minimumPartitionSize"
+ "VectorDatabaseConfig:migrate no-op for initial migration"
+ "_averagePartitionSize"
+ "_maximumPartitionSize"
+ "_minimumPartitionSize"
+ "_proposedAveragePartitionSize"
+ "assetsWithIdentifiers:attributeFilters:pagination:includeVectors:error:"
+ "averagePartitionSize"
+ "d"
+ "d16@0:8"
+ "getAssetsWithIdentifiers:attributeFilters:pagination:includeVectors:error:"
+ "getStringIdentifiedAssetsWithIdentifiers:attributeFilters:pagination:includeVectors:error:"
+ "i16@0:8"
+ "initWithDeltaStoreCount:storeCount:proposedAveragePartitionSize:averagePartitionSize:minimumPartitionSize:maximumPartitionSize:"
+ "initWithIdentifier:payload:metric:value:"
+ "maximumPartitionSize"
+ "minimumPartitionSize"
+ "observations_temp"
+ "proposedAveragePartitionSize"
+ "setAveragePartitionSize:"
+ "setMaximumPartitionSize:"
+ "setMinimumPartitionSize:"
+ "setProposedAveragePartitionSize:"
+ "stringIdentifiedAssetsWithIdentifiers:attributeFilters:pagination:includeVectors:error:"
+ "stringIdentifiers"
+ "v20@0:8i16"
+ "v24@0:8d16"
- "\n    WHERE (\n        rowid in ("
- "\n    WHERE asset_id = ?"
- "\x13"
- "\x14"
- "            CREATE TABLE IF NOT EXISTS "
- "    DELETE FROM identifiers"
- "    DELETE FROM identifiers\n    WHERE rowid = ?"
- "    DROP TABLE IF EXISTS identifiers"
- "    SELECT asset_id, rowid\n    FROM "
- "    SELECT f1.rowid, f1.asset_id, f0.document\n    "
- "    SELECT rowid\n    FROM "
- "    WHERE f1.rowid in ("
- " (\n                id INTEGER PRIMARY KEY AUTOINCREMENT\n            ) STRICT"
- " (\n        asset_id\n    ) VALUES (?)"
- " (\n        asset_id        INTEGER PRIMARY KEY"
- " (\n        partition       INTEGER NOT NULL,\n        id              INTEGER NOT NULL,\n        observationid   INTEGER NOT NULL,\n        embedding       BLOB NOT NULL,\n        PRIMARY KEY (partition, id)\n    ) STRICT, WITHOUT ROWID"
- " AND f1.rowid in ("
- "@48@0:8q16@24@32@40"
- "@48@0:8q16@24@32@40"
- "@48@0:8q16@24q32@40"
- "@56@0:8@16q24@32@40@48"
- "@56@0:8q16@24@32q40@48"
- "Cannot compute top K matches over empty observations."
- "Errors while searching for identifier for multiple batches. Errors: "
- "Executing with batching SQL: %!{(MISSING)private}s, bindingValues: %!{(MISSING)private}s"
- "FROM identifiers f0"
- "INNER JOIN identifiers f1 ON f0.asset_id = f1.rowid\n"
- "Identifier lookup failed"
- "Internal error: No internal identifier set. Something very wrong, this should not happen."
- "Mismatched sorted list size found."
- "Row did not have all required fields: id, embedding, observationid, and partition"
- "SELECT observationid, embedding, partition, id\nFROM "
- "Tq,N,V_assetIdentifier"
- "Tq,N,V_identifier"
- "_assetIdentifier"
- "_identifier"
- "assetIdentifier"
- "getAssets: identifiers: %!{(MISSING)private}s -- attribute filters: %!{(MISSING)private}s -- pagination: limit (0 is unset) %!l(MISSING)d offset (0 is unset): %!l(MISSING)d -- orderBy: %!{(MISSING)private}s"
- "getAssetsWithIdentifiers:attributeFilters:pagination:error:"
- "getIdentifiers: attribute filters: %!{(MISSING)private}s"
- "getStringIdentifiedAssetsWithIdentifiers:attributeFilters:pagination:error:"
- "identifier"
- "initWithAssetIdentifier:payload:metric:value:"
- "initWithAssetIdentifier:stringIdentifier:payload:metric:value:"
- "initWithDeltaStoreCount:storeCount:"
- "initWithStringIdentifier:identifier:vectors:attributes:payload:"
- "setAssetIdentifier:"
- "setIdentifier:"

```
