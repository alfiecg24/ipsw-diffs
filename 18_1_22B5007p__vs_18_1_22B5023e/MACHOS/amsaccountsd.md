## amsaccountsd

> `/System/Library/PrivateFrameworks/AppleMediaServices.framework/amsaccountsd`

```diff

-8.0.74.0.0
-  __TEXT.__text: 0xcea2c
-  __TEXT.__auth_stubs: 0x2050
-  __TEXT.__objc_stubs: 0x9460
-  __TEXT.__objc_methlist: 0x3578
+8.1.1.0.0
+  __TEXT.__text: 0xcddb4
+  __TEXT.__auth_stubs: 0x2060
+  __TEXT.__objc_stubs: 0x9340
+  __TEXT.__objc_methlist: 0x34d0
   __TEXT.__const: 0x60d0
-  __TEXT.__objc_classname: 0xdc0
-  __TEXT.__objc_methname: 0xd34f
-  __TEXT.__oslogstring: 0x96c2
-  __TEXT.__objc_methtype: 0x3bc0
-  __TEXT.__cstring: 0x6bf8
-  __TEXT.__gcc_except_tab: 0xd2c
-  __TEXT.__dlopen_cstrs: 0x2a1
+  __TEXT.__objc_classname: 0xd6c
+  __TEXT.__objc_methname: 0xd2a8
+  __TEXT.__oslogstring: 0x9842
+  __TEXT.__objc_methtype: 0x3b4c
+  __TEXT.__cstring: 0x6ee8
+  __TEXT.__gcc_except_tab: 0xd7c
+  __TEXT.__dlopen_cstrs: 0x2ed
   __TEXT.__constg_swiftt: 0x104c
-  __TEXT.__swift5_typeref: 0x1331
+  __TEXT.__swift5_typeref: 0x132f
   __TEXT.__swift5_reflstr: 0xb56
   __TEXT.__swift5_fieldmd: 0x12f8
   __TEXT.__swift5_capture: 0x298

   __TEXT.__swift5_protos: 0x48
   __TEXT.__swift5_mpenum: 0x10
   __TEXT.__info_plist: 0x578
-  __TEXT.__unwind_info: 0x2bf8
-  __TEXT.__eh_frame: 0x35f0
-  __DATA_CONST.__auth_got: 0x1038
-  __DATA_CONST.__got: 0x988
-  __DATA_CONST.__auth_ptr: 0x4b0
-  __DATA_CONST.__const: 0x57e0
-  __DATA_CONST.__cfstring: 0x3c80
+  __TEXT.__unwind_info: 0x2c28
+  __TEXT.__eh_frame: 0x3618
+  __DATA_CONST.__auth_got: 0x1040
+  __DATA_CONST.__got: 0x980
+  __DATA_CONST.__auth_ptr: 0x4a0
+  __DATA_CONST.__const: 0x5970
+  __DATA_CONST.__cfstring: 0x3e80
   __DATA_CONST.__objc_classlist: 0x298
   __DATA_CONST.__objc_catlist: 0x90
-  __DATA_CONST.__objc_protolist: 0x250
+  __DATA_CONST.__objc_protolist: 0x240
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_protorefs: 0xd0
-  __DATA_CONST.__objc_superrefs: 0x188
+  __DATA_CONST.__objc_protorefs: 0x58
+  __DATA_CONST.__objc_superrefs: 0x190
   __DATA_CONST.__objc_intobj: 0x78
-  __DATA.__objc_const: 0xba00
-  __DATA.__objc_selrefs: 0x2db8
-  __DATA.__objc_ivar: 0x320
+  __DATA.__objc_const: 0xba90
+  __DATA.__objc_selrefs: 0x2d70
+  __DATA.__objc_ivar: 0x330
   __DATA.__objc_data: 0x1a90
-  __DATA.__data: 0x35b8
+  __DATA.__data: 0x34f8
   __DATA.__bss: 0x7108
   __DATA.__common: 0xa0
   - /System/Library/Frameworks/Accounts.framework/Accounts

   - /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
   - /System/Library/PrivateFrameworks/AppleMediaServices.framework/AppleMediaServices
   - /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
+  - /System/Library/PrivateFrameworks/AuthKit.framework/AuthKit
   - /System/Library/PrivateFrameworks/BaseBoard.framework/BaseBoard
   - /System/Library/PrivateFrameworks/CoreIDV.framework/CoreIDV
   - /System/Library/PrivateFrameworks/CryptoKitCBridging.framework/CryptoKitCBridging
   - /System/Library/PrivateFrameworks/CryptoKitPrivate.framework/CryptoKitPrivate
   - /System/Library/PrivateFrameworks/DeviceIdentity.framework/DeviceIdentity
   - /System/Library/PrivateFrameworks/IDS.framework/IDS
-  - /System/Library/PrivateFrameworks/IDSFoundation.framework/IDSFoundation
   - /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
   - /System/Library/PrivateFrameworks/SoftLinking.framework/SoftLinking
   - /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices

   - /usr/lib/swift/libswiftObjectiveC.dylib
   - /usr/lib/swift/libswiftQuartzCore.dylib
   - /usr/lib/swift/libswiftXPC.dylib
+  - /usr/lib/swift/libswift_Builtin_float.dylib
   - /usr/lib/swift/libswift_Concurrency.dylib
+  - /usr/lib/swift/libswift_errno.dylib
+  - /usr/lib/swift/libswift_math.dylib
+  - /usr/lib/swift/libswift_signal.dylib
+  - /usr/lib/swift/libswift_stdio.dylib
+  - /usr/lib/swift/libswift_time.dylib
   - /usr/lib/swift/libswiftos.dylib
   - /usr/lib/swift/libswiftsimd.dylib
-  Functions: 3945
-  Symbols:   929
-  CStrings:  3959
+  - /usr/lib/swift/libswiftsys_time.dylib
+  - /usr/lib/swift/libswiftunistd.dylib
+  Functions: 3940
+  Symbols:   937
+  CStrings:  3975
 
Symbols:
+ _AKAuthenticationIDMSTokenKey
+ _AMSBagKeyFraudReportPKSService
+ _AMSBagKeyFraudReportService
+ _AMSHTTPHeaderAuthorization
+ _NSInternalInconsistencyException
+ _NSInvalidArgumentException
+ _OBJC_CLASS_$_AMSDaemonConnectionInterface
+ _OBJC_CLASS_$_NSException
+ _OBJC_CLASS_$_NSScanner
+ __swift_FORCE_LOAD_$_swift_Builtin_float
+ __swift_FORCE_LOAD_$_swift_errno
+ __swift_FORCE_LOAD_$_swift_math
+ __swift_FORCE_LOAD_$_swift_signal
+ __swift_FORCE_LOAD_$_swift_stdio
+ __swift_FORCE_LOAD_$_swift_time
+ __swift_FORCE_LOAD_$_swiftsys_time
+ __swift_FORCE_LOAD_$_swiftunistd
+ _objc_exception_throw
- _OBJC_CLASS_$_AMSAuthenticateRequest
- _OBJC_CLASS_$_AMSAuthenticateResult
- _OBJC_CLASS_$_AMSBiometricsSignatureRequest
- _OBJC_CLASS_$_AMSBiometricsSignatureResult
- _OBJC_CLASS_$_AMSBuyParams
- _OBJC_CLASS_$_AMSDialogResult
- _OBJC_CLASS_$_AMSFDSRequest
- _OBJC_CLASS_$_AMSURLAction
- _OBJC_CLASS_$_NSURLRequest
- _OBJC_CLASS_$_NSURLResponse
CStrings:
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Cannot create ODI assessment provider: %!{(MISSING)public}@."
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Failed to obtain ODI assessment, proceeding without one: %!{(MISSING)public}@."
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] ODI assessment successfully obtained."
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Requesting ODI assessment."
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Token with identifier '%!{(MISSING)public}@' found without authentication"
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Token with identifier '%!{(MISSING)public}@' not found. Attempting to perform silent auth."
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Unable to look up token for no or local account"
+ "%!{(MISSING)public}@: [%!{(MISSING)public}@] Unknown authentication token type (%!{(MISSING)public}lu) passed, using non-JWT token identifier"
+ "@\"<AMSDFraudReportODIAssessmentProvider>\"8@?0"
+ "@\"AMSPromise\"16@?0@\"NSDictionary\"8"
+ "@\"AMSPromise\"24@?0@\"AMSURLRequest\"8@\"NSError\"16"
+ "@\"AMSPromise\"24@?0@\"AMSURLResult\"8@\"NSError\"16"
+ "@\"AMSPromise\"24@?0@\"NSMutableURLRequest\"8@\"NSDictionary\"16"
+ "@\"AMSPromise\"24@?0@\"NSURL\"8@\"NSError\"16"
+ "@\"AMSPromise\"32@?0@\"NSMutableURLRequest\"8@\"ACAccount\"16Q24"
+ "@56@0:8@16@24@?32@?40@?48"
+ "@60@0:8@16@24@32@40Q48B56"
+ "AMSDFraudReportODIAssessmentProvider"
+ "Cannot create transactionIDData."
+ "Error fraud report blinding message"
+ "Failed to create ODISession"
+ "IDMS tokens dictionary is missing"
+ "ODI assessment will not be available."
+ "Reported score not found"
+ "T@\"NSString\",R,N,V_nameSpace"
+ "TB,R,N,V_shouldIncludeODIAssessment"
+ "TQ,R,N,V_authenticationTokenType"
+ "Token not found"
+ "Token with identifier '%!@(MISSING)' is missing in the IDMS tokens dictionary"
+ "Unable to create arguments for unblinding"
+ "Unable to find reported score in fsrData"
+ "Unable to unblind fraud report response"
+ "Unhandled outcome type"
+ "X-Apple-Auth-Token-Identifier"
+ "_authenticationTokenType"
+ "_blindedTransactionWithTransactionID:pks:keyID:error:"
+ "_odiAssessmentProvider"
+ "_shouldIncludeODIAssessment"
+ "_tokenDecorationProvider"
+ "ams_fetchGrandSlamTokenForAccount:withIdentifier:"
+ "appendTokenIfNeededToRequest:forAccount:authenticationTokenType:"
+ "assessmentWithCompletion:"
+ "authenticationTokenType"
+ "bag must not be nil"
+ "bag, tokenDecorationProvider, odiAssessmentProvider and deviceIdentitySigningProvider must all be non-nil"
+ "com.apple.gs.tdmv2.auth"
+ "determineAccountForAccount:"
+ "exceptionWithName:reason:userInfo:"
+ "fetchTokenForAccount:tokenIdentifier:"
+ "fsrData"
+ "grandSlamTokenIdentifierForAuthenticationTokenType:"
+ "hasKeysForAccount:forSignaturePurpose:completion:"
+ "hasKeysForAccount:forSignaturePurpose:withError:"
+ "home:didUpdateDismissedWalletKeyUWBUnlockOnboarding:"
+ "initWithAccount:bag:tokenDecorationProvider:odiAssessmentProvider:deviceIdentitySigningProvider:"
+ "initWithError:"
+ "initWithNameSpace:reportedScore:blindedMessage:keyID:authenticationTokenType:shouldIncludeODIAssessment:"
+ "initWithString:"
+ "isAtEnd"
+ "keyIdentifier"
+ "nameSpace, reportedScore, blindedMessage, keyID and grandSlamTokenIdentifier all must be nonnull"
+ "odiAssessment"
+ "performFraudReportRefreshWithOptions:completion:"
+ "performSilentAuthAndFetchTokenForAccount:tokenIdentifier:"
+ "performUnBlindingFraudReportForResponse:tdmToken:pks:error:"
+ "provideFeedbackWithOutcome:"
+ "requestBodyParametersForRequest:odiAssessmentProvider:"
+ "requestEncoderWithAccount:"
+ "response.evaluatedElement is nil"
+ "response.nameSpace is nil"
+ "response.proof is nil"
+ "scanLocation"
+ "scanUpToString:intoString:"
+ "setScanLocation:"
+ "setServiceIdentifier:"
+ "shouldIncludeODIAssessment"
+ "tdmToken and pks must both be non-nil"
+ "token.blindedElement is nil."
+ "transactionIdentifier"
+ "v32@0:8@\"AMSFraudReportOptions\"16@?<v@?@\"AMSFraudReportResponse\"@\"NSError\">24"
+ "v40@0:8@\"ACAccount\"16Q24@?<v@?B@\"NSError\">32"
+ "v40@0:8@16Q24@?32"
- "%!{(MISSING)public}@ [%!{(MISSING)public}@] Error fraud report blinding message, cannot blind message."
- "%!{(MISSING)public}@: [%!{(MISSING)public}@] Fraud report service request failed"
- "%!{(MISSING)public}@: [%!{(MISSING)public}@] GS token found without authentication"
- "%!{(MISSING)public}@: [%!{(MISSING)public}@] GS token not found."
- "%!{(MISSING)public}@: [%!{(MISSING)public}@] GS token not found. Attempting to perform silent auth."
- "%!{(MISSING)public}@: [%!{(MISSING)public}@] GS-Token lookup failed for no GS token"
- "@\"AMSDFraudReportBlindedTransaction\"16@?0^@8"
- "@\"AMSPromise\"16@?0@\"AMSURLResult\"8"
- "@\"AMSPromise\"24@?0@\"NSMutableURLRequest\"8@\"ACAccount\"16"
- "@\"AMSPromise\"24@?0@\"NSMutableURLRequest\"8@\"AMSDFraudReportServiceRequest\"16"
- "@48@0:8@16@24@?32@?40"
- "AMSDaemonConnectionInterface"
- "AMSDeviceMessengerClientInterface"
- "AMSRequestPresentationDelegate"
- "AMSSecurityClientInterface"
- "Authorization"
- "B16@?0@\"NSString\"8"
- "Failed to obtain a valid GS token"
- "Invalid parameters (no bag)"
- "T@\"NSString\",&,N,V_nameSpace"
- "_accountCachedServerDataInterface"
- "_accountSignOutInterface"
- "_blindedTransactionWithTransactionID:pks:keyID:"
- "_configureURLPresentationDelegateClasses:"
- "_cookieServiceInterface"
- "_deviceMessengerClientInterface"
- "_deviceMessengerServiceInterface"
- "_dismissQRDialogServiceInterface"
- "_fraudReportServiceInterface"
- "_gsTokenDecorationProvider"
- "_keychainServiceInterface"
- "_paymentConfirmationInterface"
- "_paymentValidationServiceInterface"
- "_purchaseServiceInterface"
- "_securityClientInterface"
- "_securityServiceInterface"
- "_setUpSecurityInterfaceApplePayClassic:"
- "_setUpSecurityInterfaceBiometricSelectors:"
- "_setUpSecurityInterfaceDeviceIdentitySelectors:"
- "_setUpSecurityInterfaceHandleResponseSelector:"
- "_setUpSecurityInterfaceSignedHeadersSelector:"
- "_setUpSecurityInterfaceSilentEnrollmentSelector:"
- "ams_PLISTClasses"
- "ams_appendGSTokenIfNeededToRequest:forAccount:"
- "ams_determineAccountForAccount:"
- "ams_fetchGSTokenForAccount:"
- "ams_performSilentAuthForAccountAndFetchGSToken:"
- "ams_propertyXPCClasses"
- "ams_requestEncoderWithAccount:"
- "ams_serviceParametersForRequest:"
- "componentsSeparatedByString:"
- "fsr-keys-url"
- "fsr-refresh-url"
- "initWithAccount:bag:gsTokenDecorationProvider:deviceIdentitySigningProvider:"
- "initWithNameSpace:reportedScore:blindedMessage:keyID:"
- "performFraudReportRefreshWithAccount:transactionID:nameSpace:fsrData:keyID:completion:"
- "performUnBlindingFraudReportForResponse:tdmToken:pks:"
- "setClass:forSelector:argumentIndex:ofReply:"
- "setClasses:forSelector:argumentIndex:ofReply:"
- "setInterface:forSelector:argumentIndex:ofReply:"
- "setNameSpace:"
- "stringByReplacingOccurrencesOfString:withString:"
- "v24@0:8@\"AMSXDMessage\"16"
- "v32@0:8@\"AMSAuthenticateRequest\"16@?<v@?@\"AMSAuthenticateResult\"@\"NSError\">24"
- "v32@0:8@\"AMSDialogRequest\"16@?<v@?@\"AMSDialogResult\"@\"NSError\">24"
- "v64@0:8@\"ACAccount\"16@\"NSString\"24@\"NSString\"32@\"NSString\"40@\"NSString\"48@?<v@?@\"AMSFraudReportResponse\"@\"NSError\">56"

```
