## EmailDaemon

> `/System/Library/PrivateFrameworks/EmailDaemon.framework/EmailDaemon`

```diff

-3826.300.77.2.2
-  __TEXT.__text: 0x23a50c
-  __TEXT.__auth_stubs: 0x23d0
-  __TEXT.__objc_methlist: 0x12ce4
-  __TEXT.__gcc_except_tab: 0x488f8
+3826.300.86.2.3
+  __TEXT.__text: 0x23dd2c
+  __TEXT.__auth_stubs: 0x23e0
+  __TEXT.__objc_methlist: 0x12e64
+  __TEXT.__gcc_except_tab: 0x490e0
   __TEXT.__const: 0x1d08
-  __TEXT.__cstring: 0x20017
-  __TEXT.__oslogstring: 0x17006
+  __TEXT.__cstring: 0x201d7
+  __TEXT.__oslogstring: 0x17456
   __TEXT.__ustring: 0x2c
   __TEXT.__dlopen_cstrs: 0x57
   __TEXT.__swift5_typeref: 0x715

   __TEXT.__swift5_types: 0xbc
   __TEXT.__swift5_capture: 0x128
   __TEXT.__swift5_mpenum: 0x8
-  __TEXT.__unwind_info: 0xfbe0
+  __TEXT.__unwind_info: 0xfd48
   __TEXT.__eh_frame: 0x860
-  __TEXT.__objc_classname: 0x2cec
-  __TEXT.__objc_methname: 0x379e1
-  __TEXT.__objc_methtype: 0x7e8e
-  __TEXT.__objc_stubs: 0x242e0
-  __DATA_CONST.__got: 0x1a80
-  __DATA_CONST.__const: 0x8a50
-  __DATA_CONST.__objc_classlist: 0x948
+  __TEXT.__objc_classname: 0x2d18
+  __TEXT.__objc_methname: 0x37e71
+  __TEXT.__objc_methtype: 0x7ebb
+  __TEXT.__objc_stubs: 0x245e0
+  __DATA_CONST.__got: 0x1a90
+  __DATA_CONST.__const: 0x8bf8
+  __DATA_CONST.__objc_classlist: 0x950
   __DATA_CONST.__objc_catlist: 0x38
   __DATA_CONST.__objc_protolist: 0x3b0
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_selrefs: 0xb380
+  __DATA_CONST.__objc_selrefs: 0xb440
   __DATA_CONST.__objc_protorefs: 0xb8
-  __DATA_CONST.__objc_superrefs: 0x668
-  __DATA_CONST.__objc_arraydata: 0x688
-  __AUTH_CONST.__auth_got: 0x11f8
+  __DATA_CONST.__objc_superrefs: 0x670
+  __DATA_CONST.__objc_arraydata: 0x680
+  __AUTH_CONST.__auth_got: 0x1200
   __AUTH_CONST.__auth_ptr: 0x340
   __AUTH_CONST.__const: 0x3ce8
-  __AUTH_CONST.__cfstring: 0x107a0
-  __AUTH_CONST.__objc_const: 0x26900
-  __AUTH_CONST.__objc_intobj: 0x8d0
-  __AUTH_CONST.__objc_arrayobj: 0x288
+  __AUTH_CONST.__cfstring: 0x107c0
+  __AUTH_CONST.__objc_const: 0x26bc0
+  __AUTH_CONST.__objc_intobj: 0x8e8
+  __AUTH_CONST.__objc_arrayobj: 0x270
   __AUTH_CONST.__objc_dictobj: 0xc8
   __AUTH_CONST.__objc_doubleobj: 0x60
-  __AUTH.__objc_data: 0x1e0
-  __AUTH.__data: 0x18
-  __DATA.__objc_ivar: 0x1600
+  __AUTH.__objc_data: 0x230
+  __AUTH.__data: 0x20
+  __DATA.__objc_ivar: 0x1624
   __DATA.__data: 0x2f80
   __DATA.__crash_info: 0x40
-  __DATA.__bss: 0x22e0
+  __DATA.__bss: 0x22f0
   __DATA_DIRTY.__objc_data: 0x5d68
   __DATA_DIRTY.__data: 0xe40
-  __DATA_DIRTY.__bss: 0x1418
+  __DATA_DIRTY.__bss: 0x1420
   __DATA_DIRTY.__common: 0x40
   - /System/Library/Frameworks/Accounts.framework/Accounts
   - /System/Library/Frameworks/AppIntents.framework/AppIntents

   - /usr/lib/swift/libswiftsimd.dylib
   - /usr/lib/swift/libswiftsys_time.dylib
   - /usr/lib/swift/libswiftunistd.dylib
-  Functions: 10275
-  Symbols:   11121
-  CStrings:  13983
+  Functions: 10329
+  Symbols:   11177
+  CStrings:  14051
 
Symbols:
+ _EMBlackPearlIsLanguageSupported
+ _EMUserDefaultAllInboxesEnabled
+ _OBJC_CLASS_$_EDBusinessChatServicesBusinessesGrouping
+ _OBJC_METACLASS_$_EDBusinessChatServicesBusinessesGrouping
- _kPreferredLanguagesKey
CStrings:
+ "\b\x11"
+ "\t%!p(MISSING)\n"
+ "%!@(MISSING)%!@(MISSING)"
+ "%!{(MISSING)public}@ - token canceled"
+ "%!{(MISSING)public}@: Couldn't iterate addresses because database is locked"
+ "-[EDBusinessPersistence countOfAddressesNeedingUpdate]"
+ "-[EDBusinessPersistence fetchBusinessMetadataForAddresses:completionHandler:]_block_invoke"
+ "-[EDBusinessPersistence iterateAddressesNeedingUpdateWithCancelationToken:handler:]"
+ "<%!@(MISSING): %!p(MISSING)> %!@(MISSING) (%!l(MISSING)ld, %!@(MISSING)) messages:%!l(MISSING)u, unread count:%!l(MISSING)u, unseen count:%!l(MISSING)u, flagCount:%!l(MISSING)u, Category:%!@(MISSING) %!@(MISSING)"
+ "@\"NSString\"16@?0@\"<EDAccount>\"8"
+ "Addresses enumeration canceled"
+ "Addresses enumeration canceled before first run"
+ "BCSErrorReturnedNoDataCode"
+ "Biome ETL-To-CA After Query: messageGrains=nil"
+ "Biome ETL-To-CA After Query: rowCount %!l(MISSING)u"
+ "Biome ETL-To-CA Before Query: replaced endTS from user defaults lastForegroundedTimestamps: %!@(MISSING)"
+ "Biome ETL-To-CA Before Query: replaced endTS with 0"
+ "Biome ETL-To-CA Before Query: startTS: %!@(MISSING), endTS: %!@(MISSING)"
+ "Business Connect query failed with error %!{(MISSING)public}@"
+ "Business Connect returned an unknown emailIdentifier we didn't supply: %!@(MISSING)"
+ "Business grouping canceled. Returning early"
+ "Couldn't convert a Business Connect Identifier for address: %!@(MISSING) with address ID: %!@(MISSING)"
+ "Decrementing flagCount by %!l(MISSING)ld for sender %!@(MISSING)"
+ "EDBusinessChatServicesBusinessesGrouping"
+ "Exception raised during transaction, %!{(MISSING)public}@\nStack:\n%!{(MISSING)public}@"
+ "Failed to fetch Business Connect metadata for addressID: %!@(MISSING) (%!{(MISSING)public}@). Error: %!{(MISSING)public}@"
+ "Failed to update last BCS sync date for address ID %!@(MISSING) in business_addresses to %!@(MISSING), due to error %!{(MISSING)public}@"
+ "Fetched Business Connect metadata for addressID: %!@(MISSING) (%!{(MISSING)public}@)"
+ "Fetching Business Connect metadata for addresses: %!{(MISSING)public}@"
+ "Fetching Business Connect metadata for emailIdentifiers: %!@(MISSING)"
+ "Incrementing flagCount by %!l(MISSING)ld for sender %!@(MISSING)"
+ "No business metadata returned for addressID: %!@(MISSING) (%!{(MISSING)public}@)"
+ "Successfully updated last BCS sync date for address ID %!@(MISSING) in business_addresses to %!@(MISSING)"
+ "T@\"EDBusinessPersistence\",R,N,V_businessPersistence"
+ "T@\"NSConditionLock\",R,N,V_categorizationQueueLock"
+ "TQ,N,V_addressesChecked"
+ "TQ,N,V_addressesToCheck"
+ "TQ,N,V_flagCount"
+ "TQ,N,V_numBatchesQueued"
+ "Updated %!l(MISSING)d/%!l(MISSING)d addresses with Business Connect."
+ "WITH receive_row_num AS (    SELECT accountId,           messageId,           senderId,           receivingAccountDomain,           metadataPrimaryKey,           predictedCategory,           currCategoryView,           reasonCodes,           isAllInboxesCategoriesEnabled AS isAllInboxesBlackPearlEnabled,           isMailAccountPersonalAccount,           isMailAccountCategoriesEnabled AS isMailAccountBlackPearlEnabled,           ROW_NUMBER() OVER (PARTITION BY accountId, messageId ORDER BY eventTimestamp DESC) AS rn    FROM \"Mail.CategorizationAnalytics.Receive\"    WHERE receiveTimestamp >= %!l(MISSING)lu          AND receiveTimestamp < %!l(MISSING)lu          AND accountId IN (%!@(MISSING)) ),receive AS (    SELECT accountId,           messageId,           senderId,           receivingAccountDomain,           metadataPrimaryKey,           predictedCategory,           currCategoryView,           reasonCodes,           isAllInboxesBlackPearlEnabled,           isMailAccountPersonalAccount,           isMailAccountBlackPearlEnabled    FROM receive_row_num    WHERE rn = 1),recategorize_row_num AS (    SELECT accountId,           messageId,           currCategoryView,           recategorizationBy,           recategorizeTimestamp,           ROW_NUMBER() OVER (PARTITION BY accountId, messageId ORDER BY recategorizeTimestamp DESC) AS rn    FROM \"Mail.CategorizationAnalytics.Recategorize\"),recategorize AS (    SELECT accountId,           messageId,           currCategoryView,           recategorizationBy,           recategorizeTimestamp AS lastRecategorizeTimestamp    FROM recategorize_row_num    WHERE rn = 1),flattened AS (    SELECT receive.messageId,           receive.senderId,           receive.receivingAccountDomain,           receive.metadataPrimaryKey,           receive.isAllInboxesBlackPearlEnabled,           receive.isMailAccountPersonalAccount,           receive.isMailAccountBlackPearlEnabled,           receive.predictedCategory,           COALESCE(recategorize.currCategoryView, receive.currCategoryView) AS currCategoryView,           NULL AS hadFirstReadWithBlackPearlEnabled,           NULL AS hadReadBeforeRecat,           receive.reasonCodes,           recategorize.recategorizationBy,           RANDOM() as random_number    FROM receive         LEFT JOIN recategorize                 ON receive.accountId = recategorize.accountId                    AND receive.messageId = recategorize.messageId) SELECT messageId,       senderId,       receivingAccountDomain,       metadataPrimaryKey,       isAllInboxesBlackPearlEnabled,       isMailAccountPersonalAccount,       isMailAccountBlackPearlEnabled,       predictedCategory,       currCategoryView,       hadFirstReadWithBlackPearlEnabled,       hadReadBeforeRecat,       reasonCodes,       recategorizationBy FROM flattened ORDER BY random_number LIMIT 500;"
+ "[Biome] No accounts have BlackPearl enabled."
+ "_addressesChecked"
+ "_addressesNeedingUpdateStatementOnlyCounts:"
+ "_addressesToCheck"
+ "_blackPearlEnabledAccounts"
+ "_businessConnectResponseQueue"
+ "_categorizationQueueLock"
+ "_extraInfoForSenderItemIDsBySection:includePrecachedSendersFromSenders:"
+ "_fetchBusinessMetadataForAddresses:progressHandler:"
+ "_findExistingBrandIDForBusinessID:connection:"
+ "_flagCount"
+ "_flagCountForMessages:"
+ "_isAllInboxesCategoriesEnabled:"
+ "_notifyObserversOfInsertedSenders:senderItemIDsBySection:previousSender:includePrecachedSenders:notifyBlock:"
+ "_notifyObserversOfMovedSenders:previousSender:includePrecachedSenders:notifyBlock:"
+ "_numBatchesQueued"
+ "accountKey: %!@(MISSING), mailAccountInboxesEnabled: %!@(MISSING)"
+ "addressesChecked"
+ "addressesTableAddressColumnName"
+ "addressesTableCommentColumnName"
+ "addressesToCheck"
+ "aol.com"
+ "businessConnectGroupingQueue"
+ "businessConnectResponse"
+ "categorizationQueueLock"
+ "com.apple.email.EDBusinessChatServicesBusinessesGrouping"
+ "com.apple.email.businessesConnectGrouping"
+ "com.apple.mail.categorization.message.sampled"
+ "countOfAddressesNeedingUpdate"
+ "fetchBusinessMetadataForAddresses:completionHandler:"
+ "flagCount"
+ "gmail.com"
+ "googlemail.com"
+ "hotmail.com"
+ "icloud.com"
+ "initWithBusinessPersistence:"
+ "iterateAddressesNeedingUpdateWithCancelationToken:handler:"
+ "join:on:"
+ "lessThanEqualTo:"
+ "live.com"
+ "mac.com"
+ "me.com"
+ "msn.com"
+ "numBatchesQueued"
+ "numberOfAccounts"
+ "outlook.com"
+ "registerBusinessesGroupingTask"
+ "setAddressesChecked:"
+ "setAddressesToCheck:"
+ "setFlagCount:"
+ "setNumBatchesQueued:"
+ "setOfBlackPearlEnabledAccoutIdentifier"
+ "startBusinessConnectGroupingWithCancelationToken:progressHandler:completion:"
+ "v32@?0@\"<ECEmailAddressConvertible>\"8@\"NSNumber\"16@\"NSError\"24"
+ "v32@?0@\"EFPair\"8@\"NSArray\"16^B24"
+ "v32@?0@\"NSArray\"8@\"EMObjectID\"16@\"NSDictionary\"24"
+ "v44@0:8@16@24B32@?36"
+ "v52@0:8@16@24@32B40@?44"
+ "yahoo.com"
- "-[EDBusinessPersistence _fetchBusinessMetadataForAddress:addressID:]_block_invoke"
- "<EDGroupedSender: %!p(MISSING)> businessID:%!l(MISSING)ld businessLogoID:%!@(MISSING) Messages:%!l(MISSING)u Category:%!@(MISSING) %!@(MISSING)"
- "AppleLanguages"
- "Business metadata callback returned brandID %!@(MISSING) for address %!{(MISSING)public}@"
- "Failed to fetch business metadata for email identifier %!{(MISSING)public}@, due to error %!{(MISSING)public}@"
- "Failed to update last BCS sync date in business_addresses to %!@(MISSING), due to error %!{(MISSING)public}@"
- "Successfully updated last BCS sync date in business_addresses to %!@(MISSING)"
- "T@\"EFInt64Set\",R,C,N"
- "WITH receive_row_num AS (    SELECT accountId,           messageId,           senderId,           receivingAccountDomain,           metadataPrimaryKey,           predictedCategory,           currCategoryView,           reasonCodes,           isAllInboxesCategoriesEnabled AS isAllInboxesBlackPearlEnabled,           isMailAccountPersonalAccount,           isMailAccountCategoriesEnabled AS isMailAccountBlackPearlEnabled,           ROW_NUMBER() OVER (PARTITION BY accountId, messageId ORDER BY eventTimestamp DESC) AS rn    FROM \"Mail.CategorizationAnalytics.Receive\"    WHERE receiveTimestamp > %!u(MISSING)          AND receiveTimestamp < %!u(MISSING)          AND accountId IN (%!@(MISSING)) ),receive AS (    SELECT accountId,           messageId,           senderId,           receivingAccountDomain,           metadataPrimaryKey,           predictedCategory,           currCategoryView,           reasonCodes,           isAllInboxesBlackPearlEnabled,           isMailAccountPersonalAccount,           isMailAccountBlackPearlEnabled    FROM receive_row_num    WHERE rn = 1),recategorize_row_num AS (    SELECT accountId,           messageId,           currCategoryView,           recategorizationBy,           recategorizeTimestamp,           ROW_NUMBER() OVER (PARTITION BY accountId, messageId ORDER BY recategorizeTimestamp DESC) AS rn    FROM \"Mail.CategorizationAnalytics.Recategorize\"),recategorize AS (    SELECT accountId,           messageId,           currCategoryView,           recategorizationBy,           recategorizeTimestamp AS lastRecategorizeTimestamp    FROM recategorize_row_num    WHERE rn = 1),flattened AS (    SELECT receive.messageId,           receive.senderId,           receive.receivingAccountDomain,           receive.metadataPrimaryKey,           receive.isAllInboxesBlackPearlEnabled,           receive.isMailAccountPersonalAccount,           receive.isMailAccountBlackPearlEnabled,           receive.predictedCategory,           COALESCE(recategorize.currCategoryView, receive.currCategoryView) AS currCategoryView,           NULL AS hadFirstReadWithBlackPearlEnabled,           NULL AS hadReadBeforeRecat,           receive.reasonCodes,           recategorize.recategorizationBy,           RANDOM() as random_number    FROM receive         LEFT JOIN recategorize                 ON receive.accountId = recategorize.accountId                    AND receive.messageId = recategorize.messageId) SELECT messageId,       senderId,       receivingAccountDomain,       metadataPrimaryKey,       isAllInboxesBlackPearlEnabled,       isMailAccountPersonalAccount,       isMailAccountBlackPearlEnabled,       predictedCategory,       currCategoryView,       hadFirstReadWithBlackPearlEnabled,       hadReadBeforeRecat,       reasonCodes,       recategorizationBy FROM flattened ORDER BY random_number LIMIT 500;"
- "[Biome] No accounts have BlackPearl enabled. MessageGrain empty startTS %!@(MISSING) endTS %!@(MISSING) BlackPearlEnabledAccount %!@(MISSING)"
- "_extraInfoForSenders:isMove:includePrecachedSenders:"
- "_fetchBusinessMetadataForAddress:addressID:"
- "_mutableDictionaryForDictionary:"
- "_setOfBlackPearlEnabledAccoutIdentifier"
- "addressesTableDomainColumnName"
- "aol"
- "com.apple.mail.categorization.biome.message.grain"
- "currentLanguageTag"
- "en-US"
- "gmail"
- "googlemail"
- "hotmail"
- "icloud"
- "live"
- "mac"
- "me"
- "msn"
- "outlook"
- "v32@?0@\"EFPair\"8@\"EFInt64Set\"16^B24"
- "v32@?0@\"NSNumber\"8@\"EFInt64Set\"16^B24"
- "yahoo"

```
