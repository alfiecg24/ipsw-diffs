## FPFS

> `/System/Library/PrivateFrameworks/FPFS.framework/FPFS`

```diff

-2732.60.111.0.0
-  __TEXT.__text: 0x8bd588
-  __TEXT.__auth_stubs: 0x4f10
-  __TEXT.__objc_methlist: 0x1780
+2732.60.126.0.0
+  __TEXT.__text: 0x8f540c
+  __TEXT.__auth_stubs: 0x51c0
+  __TEXT.__objc_methlist: 0x1798
   __TEXT.__ustring: 0x30
-  __TEXT.__const: 0x1aebc
+  __TEXT.__const: 0x1ca9c
   __TEXT.__gcc_except_tab: 0x520
-  __TEXT.__oslogstring: 0xe05a
-  __TEXT.__cstring: 0x2bcb6
-  __TEXT.__swift5_typeref: 0xe83f
-  __TEXT.__constg_swiftt: 0xf488
+  __TEXT.__oslogstring: 0xe54a
+  __TEXT.__cstring: 0x2c6c6
+  __TEXT.__swift5_typeref: 0xf20f
+  __TEXT.__swift5_fieldmd: 0x88f0
+  __TEXT.__constg_swiftt: 0xfd44
+  __TEXT.__swift5_reflstr: 0x97ee
   __TEXT.__swift5_builtin: 0x6f4
-  __TEXT.__swift5_reflstr: 0x93be
-  __TEXT.__swift5_fieldmd: 0x83e8
-  __TEXT.__swift5_assocty: 0x1c08
-  __TEXT.__swift5_capture: 0x1416c
-  __TEXT.__swift5_proto: 0x1358
-  __TEXT.__swift5_types: 0x86c
+  __TEXT.__swift5_assocty: 0x1c68
+  __TEXT.__swift5_capture: 0x14334
+  __TEXT.__swift5_protos: 0x88
+  __TEXT.__swift5_proto: 0x14ac
+  __TEXT.__swift5_types: 0x8d4
   __TEXT.__swift5_mpenum: 0xfc
-  __TEXT.__swift5_protos: 0x70
   __TEXT.__swift5_types2: 0x4
-  __TEXT.__unwind_info: 0xf528
-  __TEXT.__eh_frame: 0x20c94
+  __TEXT.__unwind_info: 0x104e8
+  __TEXT.__eh_frame: 0x2327c
   __TEXT.__objc_classname: 0x33f
-  __TEXT.__objc_methname: 0x992e
-  __TEXT.__objc_methtype: 0x2e39
+  __TEXT.__objc_methname: 0x9b16
+  __TEXT.__objc_methtype: 0x2ebd
   __TEXT.__objc_stubs: 0x1f20
-  __DATA_CONST.__got: 0x1128
+  __DATA_CONST.__got: 0x11b8
   __DATA_CONST.__const: 0x1260
-  __DATA_CONST.__objc_classlist: 0x230
+  __DATA_CONST.__objc_classlist: 0x248
   __DATA_CONST.__objc_catlist: 0x38
   __DATA_CONST.__objc_protolist: 0x1a8
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_selrefs: 0x24e0
+  __DATA_CONST.__objc_selrefs: 0x2530
   __DATA_CONST.__objc_protorefs: 0xe0
   __DATA_CONST.__objc_superrefs: 0x48
-  __AUTH_CONST.__auth_got: 0x2798
-  __AUTH_CONST.__auth_ptr: 0x2580
-  __AUTH_CONST.__const: 0x3c640
+  __AUTH_CONST.__auth_got: 0x28f0
+  __AUTH_CONST.__auth_ptr: 0x2520
+  __AUTH_CONST.__const: 0x3d4b8
   __AUTH_CONST.__cfstring: 0x820
-  __AUTH_CONST.__objc_const: 0x112a0
+  __AUTH_CONST.__objc_const: 0x114b8
   __AUTH_CONST.__objc_intobj: 0x18
   __AUTH.__objc_data: 0xad8
-  __AUTH.__data: 0x1868
+  __AUTH.__data: 0x1bd8
   __DATA.__objc_ivar: 0x124
-  __DATA.__data: 0x6310
-  __DATA.__bss: 0x1da90
-  __DATA.__common: 0xa8
-  __DATA_DIRTY.__objc_data: 0x20c8
-  __DATA_DIRTY.__data: 0xbc30
-  __DATA_DIRTY.__bss: 0x8130
+  __DATA.__data: 0x6c00
+  __DATA.__bss: 0x20390
+  __DATA.__common: 0xb0
+  __DATA_DIRTY.__objc_data: 0x20a8
+  __DATA_DIRTY.__data: 0xbb10
+  __DATA_DIRTY.__bss: 0x8030
   __DATA_DIRTY.__common: 0x638
   - /System/Library/Frameworks/Combine.framework/Combine
   - /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation

   - /usr/lib/swift/libswiftsimd.dylib
   - /usr/lib/swift/libswiftsys_time.dylib
   - /usr/lib/swift/libswiftunistd.dylib
-  Functions: 24155
-  Symbols:   3443
-  CStrings:  6213
+  Functions: 24864
+  Symbols:   3462
+  CStrings:  6309
 
Symbols:
+ _CFUserNotificationCreate
+ _CFUserNotificationReceiveResponse
+ _OBJC_CLASS_$_OS_dispatch_queue_serial
+ _OBJC_CLASS_$_OS_dispatch_workloop
+ _fp_shouldObfuscateFilenames
+ _fpfs_is_internal_build
+ _fpfs_is_seed_build
+ _fpfs_supports_tap_to_feedback
+ _kCFAllocatorDefault
+ _kCFUserNotificationAlertHeaderKey
+ _kCFUserNotificationAlertMessageKey
+ _kCFUserNotificationAlternateButtonTitleKey
+ _kCFUserNotificationDefaultButtonTitleKey
+ _kCFUserNotificationIconURLKey
+ _objc_release_x4
+ _swift_defaultActor_deallocate
+ _swift_defaultActor_destroy
+ _swift_defaultActor_initialize
+ _swift_deletedAsyncMethodErrorTu
+ _swift_task_isCurrentExecutor
CStrings:
+ "\n           )\n       )\n   AND +rt.fs_scheduling_state != "
+ "\n   AND +rt.fp_scheduling_state != "
+ "\n  FROM reconciliation_table AS child_rt\n INNER JOIN "
+ "\n ORDER BY rt.rowID"
+ "  - diagnostics state: "
+ "  - no diagnostics state"
+ "$defaultActor"
+ "%!{(MISSING)public}s was moved inside package %!{(MISSING)public}s"
+ "+ FPDiagnosticsManager state:"
+ "+ FPFeedbackManager state:"
+ "+ previousRecursiveDeletionRoots:"
+ "- nextAvailableTriggerDate: "
+ "- nextAvailableTriggerDate: nil"
+ "- no previous roots"
+ "- samplingResults:"
+ "- samplingResults: empty"
+ "/System/Library/CoreServices/FileProvider-Feedback.app/Contents/Resources/AppIcon.icns"
+ "Cannot add back unsentItem, couldn't find matching item"
+ "Could not initialize FPFeedbackManager: %!@(MISSING)"
+ "Couldn't send TTR, fpDiagnosticsManager resolved to nil"
+ "Couldn't trigger full feedback flow, fpfs nil"
+ "DiagnosticsManager: TTR-ing stuck deletion:\n%!s(MISSING)"
+ "Error decoding targetedSPSErrorsPayload as UTF8"
+ "Error initializing GlobalResource, cannot resolve fp_suportDirectory"
+ "Error initializing stuck deletion monitor: %!@(MISSING)"
+ "Error starting TTR: %!@(MISSING)"
+ "Eviction of %!{(MISSING)public}s failed with %!@(MISSING)"
+ "FPCK inconsistent sync state"
+ "FPDiagnosticsManager"
+ "FPFeedbackManager nil when activating StuckDeletionMonitor"
+ "FPFeedbackManagerState"
+ "Failed to find VFSItem for domain, from URL: %!s(MISSING)"
+ "Failed to identify in FSEvent#%!l(MISSING)lu item moved in package %!{(MISSING)public}s: %!@(MISSING)"
+ "Failing operation"
+ "FeedbackUIManager: Error from CFUserNotificationCreate: %!d(MISSING)"
+ "FeedbackUIManager: Opening the Feedback app failed: %!@(MISSING)"
+ "FeedbackUIManager: Will spawn feedback UI with URL: %!s(MISSING)"
+ "FeedbackUIManager: could not construct feedbackURL from string: %!s(MISSING)"
+ "FeedbackUIManager: unknown response from approval request"
+ "If the item is the domain root %!{(MISSING)public}s, no need to handle parent mtime"
+ "Incorrect actor executor assumption; Expected same executor as "
+ "Invalid number of keys found, expected one."
+ "N/A FP snapshot missing"
+ "N/A FS snapshot missing"
+ "No provider for domain in launchFeedback"
+ "RT entry without ID on either side: %!s(MISSING)"
+ "TTF_PROMPT_%!@(MISSING)_%!@(MISSING)"
+ "TTF_PROMPT_ALTERNATE"
+ "TTF_PROMPT_DEFAULT"
+ "TTF_PROMPT_ICLOUDDRIVE_%!@(MISSING)"
+ "TTF_PROMPT_OTHER"
+ "TTF_PROMPT_TITLE"
+ "_TtC9libfssync14RandomSampling"
+ "_TtC9libfssync19FPFeedbackUIManager"
+ "_TtC9libfssync19GlobalResourceStore"
+ "_id = snap.parent_id)\n WHERE child_rt."
+ "_id AND +snap.id != snap.parent_id)\n INNER JOIN reconciliation_table AS rt ON (rt."
+ "_snapshot AS snap ON (snap.id = child_rt."
+ "backoffCountForNotNowResponses"
+ "checkItemMatchesTargetedSPSError: missing RT entry for %!s(MISSING)"
+ "checkItemMatchesTargetedSPSError: missing database"
+ "currentlyShowingFeedbackRequestPrompt"
+ "deduplicating FSEvent parent lookup for %!{(MISSING)public}s"
+ "diagnosticsDB"
+ "diagnosticsManager"
+ "diagnosticsState"
+ "error reading FPFeedbackManager state: "
+ "failed to remove %!{(MISSING)public}s: %!@(MISSING)"
+ "failing operation"
+ "feedbackManager"
+ "feedbackUIManager"
+ "fileprovider-feedback://gather-feedback?provider=%!@(MISSING)&domain=%!@(MISSING)&itemid=%!@(MISSING)&error=%!@(MISSING):%!l(MISSING)d"
+ "forTargetedErrorVersions"
+ "fpDiagnosticsManager"
+ "fp_supportDirectory"
+ "globalResource"
+ "inconsistent sync"
+ "init(reconciliationTable:jobRegistry:snapshotA:snapshotB:syncState:providerLocalizedName:domainID:feedbackManager:telemetry:options:)"
+ "init(url:fsTree:fpTree:telemetry:options:creationReason:providerLocalizedName:domainID:feedbackManager:onError:)"
+ "initWithDatabasesBackupsPaths:volumeRole:providerDomainID:domainUserInfo:reason:usingFPFS:iCDPackageDetection:useShouldPause:shouldPause:sendDiagnostics:saveCheckpoint:isInvalidated:"
+ "itemID targetedError filename "
+ "keyValueStore"
+ "launchFeedbackForDomain:itemIdentifier:triggeringError:completionHandler:"
+ "launchFeedbackForm(identifier:triggeringError:)"
+ "libfssync/FPDiagnosticsManager.swift"
+ "libfssync/StuckDeletionMonitor.swift"
+ "marking sync root bit for folder %!{(MISSING)public}s"
+ "nextAvailableTriggerDate"
+ "onTriggerDiagnostics__TestingOnly"
+ "openURL:configuration:completionHandler:"
+ "providerLocalizedName"
+ "runFPCKForDomain:domainUserInfo:domainRootURL:databaseBackupPath:urls:volumeRole:options:reason:fpfs:iCDPackageDetection:shouldPause:sendDiagnostics:saveCheckpoint:isInvalidated:completionHandler:"
+ "samplingProtocol"
+ "sendDiagnostics"
+ "sendDiagnosticsForItemIDs:"
+ "sendDiagnosticsFromFPCKForItemIDs:"
+ "skippingFilenameObfuscationCheck"
+ "spsFeedbackBackoffAfterOtherResponsesInSeconds"
+ "spsFeedbackBackoffAfterOtherResponses_MultipleAttempts_InSeconds"
+ "spsFeedbackBackoffAfterSayingYesInSeconds"
+ "spsFeedbackRequestPromptTimeoutInSeconds"
+ "targetedSPSError"
+ "targetedSPSErrorValue"
+ "targetedSPSErrors"
+ "targetedSPSErrorsPayload"
+ "taskReference"
+ "triggerFeedbackApprovalRequestForItemURL:domain:uiOnly:completionHandler:"
+ "unknown, dumpDatabase callsite"
+ "unknown, restore callsite"
+ "unknown, restore callsite domain"
+ "v44@0:8@\"NSURL\"16@\"FPDDomain\"24B32@?<v@?B>36"
+ "v44@0:8@16@24B32@?36"
+ "v48@0:8@\"FPDDomain\"16@\"NSString\"24@\"NSError\"32@?<v@?@\"NSError\">40"
+ "vfsFileDescriptor"
+ "wharfResource"
+ "üíÇüèº\u200d‚ôÄÔ∏è  StuckDeletionMonitor cancelled"
+ "üíÇüèº\u200d‚ôÄÔ∏è  StuckDeletionMonitor db was nil, bailing"
+ "üíÇüèº\u200d‚ôÄÔ∏è StuckDeletionMonitor loop caught error, exiting: %!@(MISSING)"
+ "üßπ could not accept TTR from FPCK, fpDiagnosticsManager not initialized"
- "\n           )\n       )\n ORDER BY rt.rowID"
- "  - no requested TTRs"
- "%!s(MISSING) was moved inside package %!s(MISSING)"
- "+ previous stuck deletion state:"
- "Couldn't send TTR, couldn't decode VFSItem ID"
- "Couldn't send TTR, stuckDeletionMonitor resolved to nil"
- "Eviction of %!s(MISSING) failed with %!@(MISSING)"
- "Failed to identify in FSEvent#%!l(MISSING)lu item moved in package %!s(MISSING): %!@(MISSING)"
- "FileProvider stuck deletion detected"
- "If the item is the domain root %!s(MISSING), no need to handle parent mtime"
- "Stuck deletion for domain: "
- "StuckDeletionMonitor"
- "deduplicating FSEvent parent lookup for %!s(MISSING)"
- "failed to remove %!s(MISSING): %!@(MISSING)"
- "filterAlreadyTTRAndSendTTR_JumpToQueue(itemIDs:)"
- "init(reconciliationTable:jobRegistry:snapshotA:snapshotB:syncState:telemetry:options:)"
- "init(url:fsTree:fpTree:telemetry:options:creationReason:onError:)"
- "initWithDatabasesBackupsPaths:volumeRole:providerDomainID:domainUserInfo:reason:usingFPFS:iCDPackageDetection:useShouldPause:shouldPause:sendTTR:saveCheckpoint:isInvalidated:"
- "marking sync root bit for folder %!s(MISSING)"
- "runFPCKForDomain:domainUserInfo:domainRootURL:databaseBackupPath:urls:volumeRole:options:reason:fpfs:iCDPackageDetection:shouldPause:sendTTR:saveCheckpoint:isInvalidated:completionHandler:"
- "sendTTR"
- "sendTTRForItemIDs:"
- "stuck-deletion-monitor.plist"
- "üíÇüèº\u200d‚ôÄÔ∏è  TTR-ing stuck deletion:\n%!s(MISSING)"
- "üßπ could not accept TTR from FPCK, stuck deletion monitor not initialized"

```
