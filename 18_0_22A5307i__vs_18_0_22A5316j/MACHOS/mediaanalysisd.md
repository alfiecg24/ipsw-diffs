## mediaanalysisd

> `/System/Library/PrivateFrameworks/MediaAnalysis.framework/mediaanalysisd`

```diff

-255.66.2.11.1
-  __TEXT.__text: 0x176804
+255.69.4.0.0
+  __TEXT.__text: 0x17c63c
   __TEXT.__auth_stubs: 0x1140
-  __TEXT.__objc_stubs: 0x11bc0
-  __TEXT.__objc_methlist: 0x8008
-  __TEXT.__gcc_except_tab: 0x27484
-  __TEXT.__cstring: 0x12768
-  __TEXT.__objc_classname: 0x1b9d
-  __TEXT.__objc_methname: 0x172e2
-  __TEXT.__objc_methtype: 0x3466
-  __TEXT.__const: 0x408
-  __TEXT.__oslogstring: 0x1c87f
+  __TEXT.__objc_stubs: 0x11e60
+  __TEXT.__objc_methlist: 0x8188
+  __TEXT.__gcc_except_tab: 0x28334
+  __TEXT.__cstring: 0x13040
+  __TEXT.__objc_classname: 0x1bcd
+  __TEXT.__objc_methname: 0x1788a
+  __TEXT.__objc_methtype: 0x34d1
+  __TEXT.__const: 0x3f8
+  __TEXT.__oslogstring: 0x1d0ae
   __TEXT.__dlopen_cstrs: 0x59a
   __TEXT.__info_plist: 0x60b
-  __TEXT.__unwind_info: 0x57a8
+  __TEXT.__unwind_info: 0x5818
   __DATA_CONST.__auth_got: 0x8b8
-  __DATA_CONST.__got: 0xd68
+  __DATA_CONST.__got: 0xd48
   __DATA_CONST.__const: 0x5ab0
-  __DATA_CONST.__cfstring: 0xb820
-  __DATA_CONST.__objc_classlist: 0x648
+  __DATA_CONST.__cfstring: 0xbd40
+  __DATA_CONST.__objc_classlist: 0x650
   __DATA_CONST.__objc_catlist: 0x48
   __DATA_CONST.__objc_protolist: 0xd0
   __DATA_CONST.__objc_imageinfo: 0x8
   __DATA_CONST.__objc_protorefs: 0x80
   __DATA_CONST.__objc_classrefs: 0x10
-  __DATA_CONST.__objc_superrefs: 0x4c0
-  __DATA_CONST.__objc_intobj: 0x21f0
-  __DATA_CONST.__objc_arraydata: 0x768
-  __DATA_CONST.__objc_arrayobj: 0x570
+  __DATA_CONST.__objc_superrefs: 0x4c8
+  __DATA_CONST.__objc_intobj: 0x22c8
+  __DATA_CONST.__objc_arraydata: 0x7c8
+  __DATA_CONST.__objc_arrayobj: 0x5a0
   __DATA_CONST.__objc_doubleobj: 0xd0
   __DATA_CONST.__objc_dictobj: 0x28
   __DATA_CONST.__objc_floatobj: 0x10
-  __DATA.__objc_const: 0x12fe0
-  __DATA.__objc_selrefs: 0x4be0
-  __DATA.__objc_ivar: 0xfb4
-  __DATA.__objc_data: 0x3ed0
+  __DATA.__objc_const: 0x132c8
+  __DATA.__objc_selrefs: 0x4c98
+  __DATA.__objc_ivar: 0xfec
+  __DATA.__objc_data: 0x3f20
   __DATA.__data: 0xa68
-  __DATA.__bss: 0x618
+  __DATA.__bss: 0x5f8
   - /System/Library/Frameworks/AVFoundation.framework/AVFoundation
   - /System/Library/Frameworks/Accelerate.framework/Accelerate
   - /System/Library/Frameworks/Contacts.framework/Contacts

   - /usr/lib/libcompression.dylib
   - /usr/lib/libobjc.A.dylib
   - /usr/lib/libsqlite3.dylib
-  Functions: 4436
-  Symbols:   717
-  CStrings:  8235
+  Functions: 4480
+  Symbols:   713
+  CStrings:  8352
 
Symbols:
- _OBJC_CLASS_$_CSUImageCaptioner
- _OBJC_CLASS_$_CSUImageCaptionerConfiguration
- _OBJC_CLASS_$_CSUVideoCaptioner
- _OBJC_CLASS_$_CSUVideoCaptionerConfiguration
CStrings:
+ "\x02\x11"
+ "\x02\x17"
+ "   [%!@(MISSING)] Analysis already complete from compute sync ingestion; skip publishing"
+ "  [%!@(MISSING)] Reusing analysis results from compute sync (existing: %!@(MISSING))"
+ "!\"\x15"
+ "!$"
+ "!'"
+ "%!@(MISSING) Analysis already complete from compute sync ingestion; skip publishing"
+ "%!@(MISSING) Creating sandbox extension for directory %!@(MISSING)"
+ "%!@(MISSING) Failed to obtain VU gallery for Photo Library (%!@(MISSING))"
+ "%!@(MISSING) Failed to obtain VU gallery for Photo Library (%!@(MISSING))"
+ "%!@(MISSING) Queried asset count for type %!d(MISSING) for Photo Library (%!@(MISSING)): %!d(MISSING)"
+ "%!@(MISSING) Received request for vision cache storage directory URL (%!@(MISSING))"
+ "%!@(MISSING) Received request to query VU index asset count for type %!d(MISSING) (%!@(MISSING))"
+ "%!@(MISSING) Retriving CSU AX Image Caption model"
+ "%!@(MISSING) Returning sandbox extension for vision cache storage directory URL ..."
+ "%!@(MISSING) Reusing analysis results from compute sync (existing: %!@(MISSING), missing: %!@(MISSING))"
+ "%!@(MISSING)-Canceled"
+ "%!@(MISSING)-DownloadThrottled"
+ "%!@(MISSING)-NoResource"
+ "%!@(MISSING)-SoftFailure-%!d(MISSING)"
+ "%!@(MISSING)_failed"
+ "-[VCPDatabaseWriter(Maintenance) queryAssetWithLocalIdentifier:forMediaAnalysisVersion:]"
+ "/Library/Caches/com.apple.xbs/Sources/MediaAnalysis/Daemon/Photos/MADFullAnalysisResultsSynchronizationTask.mm"
+ "@\"BGSystemTask\""
+ "@92@0:8@16Q24Q32@40Q48B56@60B68@72B80@84"
+ "@92@0:8@16Q24Q32Q40B48@52@60@68@76@84"
+ "FaceAnalysisCheckpointWithFailureReportedTimestamp"
+ "FaceAnalysisCompleteWithFailureTimestamp"
+ "FaceAnalysisProgressPercentageWithFailure"
+ "LatestMediaAnalysisPhotosDatabaseSyncTimestamp"
+ "MADFullAnalysisResultsSynchronizationTask"
+ "MADFullAnalysisResultsSynchronizationTask_FetchProcessedAssets"
+ "MADFullAnalysisResultsSynchronizationTask_FetchProcessedAssets"
+ "MADFullAnalysisResultsSynchronizationTask_ResetAnalysisVersion"
+ "MADFullAnalysisResultsSynchronizationTask_ResetAnalysisVersion"
+ "MADFullAnalysisResultsSynchronizationTask_SynchronizePhotosDatabase"
+ "MADFullAnalysisResultsSynchronizationTask_SynchronizePhotosDatabase"
+ "MADPhotosFullAssetProcessingTask_DownloadUnpackComputeSync"
+ "MediaAnalysisCheckpointWithFailureReportedTimestamp"
+ "MediaAnalysisCompleteWithFailureTimestamp"
+ "MediaAnalysisImageCheckpointWithFailureReportedTimestamp"
+ "MediaAnalysisProgressPercentageWithFailure"
+ "No corresponding checkpoint_with_failure key found for taskID %!l(MISSING)u"
+ "OCRAnalysisCheckpointWithFailureReportedTimestamp"
+ "OCRAnalysisCompleteWithFailureTimestamp"
+ "OCRAnalysisProgressPercentageWithFailure"
+ "PECAnalysisCheckpointWithFailureReportedTimestamp"
+ "PECAnalysisCompleteWithFailureTimestamp"
+ "PECAnalysisProgressPercentageWithFailure"
+ "PrioritizedFaceAnalysisCheckpointWithFailureReportedTimestamp"
+ "PrioritizedFaceAnalysisCompleteWithFailureTimestamp"
+ "PrioritizedFaceAnalysisProgressPercentageWithFailure"
+ "Q24@0:8^@16"
+ "SELECT version FROM Assets WHERE localIdentifier=(?);"
+ "SceneAnalysisCheckpointWithFailureReportedTimestamp"
+ "SceneAnalysisCompleteWithFailureTimestamp"
+ "SceneAnalysisProgressPercentageWithFailure"
+ "T@\"NSArray\",&,N,V_acceptableResources"
+ "T@\"NSMutableSet\",&,N,V_completedLocalIdentifiersFromComputeSync"
+ "TB,N,V_isAnalysisCompleteFromComputeSync"
+ "Td,N,V_processingInterval"
+ "VCPMediaAnalysisClientHandler_VUGalleryAssetCountForType"
+ "VisualSearchAnalysisCheckpointWithFailureReportedTimestamp"
+ "VisualSearchAnalysisCompleteWithFailureTimestamp"
+ "VisualSearchAnalysisProgressPercentageWithFailure"
+ "[%!@(MISSING)] Analysis already complete from compute sync ingestion; skip updating change batch"
+ "[%!@(MISSING)] Failed to fetch processed assets from Photo Library, error %!@(MISSING)"
+ "[%!@(MISSING)] Failed to report BGST Checkpoint %!d(MISSING) for feature code %!@(MISSING) - %!@(MISSING) - %!@(MISSING)"
+ "[%!@(MISSING)] Failed to report BGST Custom Checkpoint %!d(MISSING) for taskIdentifier %!@(MISSING) - %!@(MISSING)"
+ "[%!@(MISSING)] Failed to report BGST Custom Checkpoint %!d(MISSING) for taskIdentifier %!@(MISSING). Error: %!@(MISSING)"
+ "[%!@(MISSING)] Failed to reset analysis version for assets with PHMediaProcessingTaskID %!l(MISSING)u, error: %!@(MISSING)"
+ "[%!@(MISSING)] Fetched %!l(MISSING)u processed assets from Photos DB"
+ "[%!@(MISSING)] Fetching processed assets from Photos DB"
+ "[%!@(MISSING)] Finish synchronizing photos database for processed asstes"
+ "[%!@(MISSING)] Finished resetting MediaAnalysis version for %!l(MISSING)u assets in Photos DB"
+ "[%!@(MISSING)] Finished synchronizing MediaAnalysis database with Photos database."
+ "[%!@(MISSING)] Last Photos database synchronization for processed assets conducted on %!@(MISSING)"
+ "[%!@(MISSING)] MADBGCheckpoint %!d(MISSING) is not within range [%!d(MISSING), %!d(MISSING)]"
+ "[%!@(MISSING)] Prepare to report CoreAnalytics for asset %!@(MISSING) ... "
+ "[%!@(MISSING)] Reported BGST Checkpoint %!d(MISSING) for feature code %!@(MISSING) - %!@(MISSING)"
+ "[%!@(MISSING)] Reported BGST Custom Checkpoint %!d(MISSING) for task taskIdentifier %!@(MISSING)"
+ "[%!@(MISSING)] Resetting MediaAnalysis version for %!l(MISSING)u assets in Photos DB"
+ "[%!@(MISSING)] Resetting analysis version for %!l(MISSING)u assets"
+ "[%!@(MISSING)] Reusing analysis results from compute sync (existing: %!@(MISSING), missing: %!@(MISSING))"
+ "[%!@(MISSING)] Skip reporting BGST Checkpoint for %!@(MISSING): no feature code"
+ "[%!@(MISSING)] Start synchronizing photos database for processed assets, imageOnly %!d(MISSING)"
+ "[%!@(MISSING)] Synchronizing MediaAnalysis database with Photos database..."
+ "[%!@(MISSING)][%!@(MISSING)] Failed to query mediaanalysis version"
+ "[%!@(MISSING)][%!@(MISSING)] Incomplete analysis results from downloaded compute sync (existing: %!@(MISSING), missing: %!@(MISSING)), falling back to download media resource"
+ "[%!@(MISSING)][%!@(MISSING)] Processing asset done (interval: %!f(MISSING)s)"
+ "[%!@(MISSING)][%!@(MISSING)] Reusing analysis results from compute sync (existing: %!@(MISSING), missing: %!@(MISSING))"
+ "[%!@(MISSING)][%!@(MISSING)] Reusing complete analysis results (%!@(MISSING)) from downloaded compute sync, skipping media resource download"
+ "[%!@(MISSING)][Publish] Embedding version: %!l(MISSING)d not supported, skip embedding publishing"
+ "[Face][%!@(MISSING)] Analysis already complete from compute sync ingestion; skipping"
+ "[Face][Download][%!@(MISSING)] Analysis complete with compute sync, skipping media resource download"
+ "[Face][Download][%!@(MISSING)] Analysis remains incomplete with compute sync, falling back to media resource download"
+ "[Face][Process][%!@(MISSING)] Analysis already complete from compute sync ingestion; skipping"
+ "[MAClientHandler][VUGalleryAssetCount]"
+ "[OCR][%!@(MISSING)] Analysis complete with compute sync, skipping media resource download and processing"
+ "[OCR][%!@(MISSING)] Analysis remains incomplete with compute sync, falling back to media resource download"
+ "[OCR][Download][%!@(MISSING)] Analysis complete with compute sync, skipping media resource download"
+ "[OCR][Download][%!@(MISSING)] Analysis remains incomplete with compute sync, falling back to media resource download"
+ "[OCR][Process][%!@(MISSING)] Analysis already complete from compute sync ingestion; skipping"
+ "[VCPDatabaseWriter] Failed to remove checkpoint_with_failure timestamp for %!@(MISSING)"
+ "[VCPDatabaseWriter] Failed to remove complete_with_failure timestamp for %!@(MISSING)"
+ "_acceptableResources"
+ "_calculateCompleteDateWithEvent:progress:taskID:checkpoint:featureAvailableCheck:database:completeTimestampKey:checkpointTimestampKey:currentDate:startDate:"
+ "_completedLocalIdentifiersFromComputeSync"
+ "_dispatchGroup"
+ "_dispatchQueue"
+ "_isAnalysisCompleteFromComputeSync"
+ "_knownRiskState"
+ "_processingInterval"
+ "_reportCoreAnalyticsWithEntry:"
+ "_systemTask"
+ "_timeoutRiskEntryTime"
+ "acceptableResources"
+ "assetCountForType:"
+ "checkpointWithFailureTimestampQueryKey"
+ "com.apple.mediaanalysisd.FullAnalysisSyncTask"
+ "com.apple.mediaanalysisd.VisualSearchAnalysisRunSession"
+ "completeWithFailureTimestampQueryKey"
+ "completedLocalIdentifiersFromComputeSync"
+ "countFailedQueryKey"
+ "currentTimeoutRiskAndStartTime:"
+ "downloadResourceForAsset:fromResources:"
+ "enterKnownTimeoutRisk:"
+ "entryWithAsset:previousStatus:previousAttempts:lastAttemptDate:analysisTypes:imageOnlyAnalysis:existingAnalysis:isAnalysisFromComputeSync:downloadResource:needDownload:acceptableResources:"
+ "exitKnownTimeoutRisk"
+ "fetchProcessedAssetsForMediaProcessingTaskID:priority:algorithmVersion:sceneConfidenceThreshold:error:"
+ "i20@0:8B16"
+ "initWithAsset:previousStatus:previousAttempts:lastAttemptDate:analysisTypes:imageOnlyAnalysis:existingAnalysis:isAnalysisFromComputeSync:downloadResource:needDownload:acceptableResources:"
+ "isAnalysisCompleteFromComputeSync"
+ "mad_calculateProgressPercentage:progressPercentageWithFailure:taskID:phTaskID:priority:failedAssetCount:error:"
+ "mad_computeSyncResource"
+ "mad_existingAnalysisFromComputeSyncForAsset:allowDownload:cancel:"
+ "mad_isAnalysisCompleteFromComputeSyncForAsset:taskID:allowDownload:cancel:"
+ "mad_refetchAsset"
+ "processingInterval"
+ "progressPercentageWithFailureQueryKey"
+ "queryAssetWithLocalIdentifier:forMediaAnalysisVersion:"
+ "queryVUIndexAssetCountForType:photoLibraryURL:reply:"
+ "querying progress for task %!@(MISSING)"
+ "requestVisionCacheStorageDirectoryURLForPhotoLibraryURL:reply:"
+ "resetAnalysisVersionForMediaProcessingTaskID:assetIdentifiers:"
+ "resetStateForMediaProcessingTaskID:assetIdentifiers:resetOptions:error:"
+ "setAcceptableResources:"
+ "setCompletedLocalIdentifiersFromComputeSync:"
+ "setIsAnalysisCompleteFromComputeSync:"
+ "setProcessingInterval:"
+ "setSystemTask:"
+ "synchronizePhotosDatabaseForProcessedAssets"
+ "synchronizePhotosDatabaseForProcessedAssetsWithImageOnly:"
+ "updateProgressForPhotoLibrary:systemTask:cancelBlock:"
+ "updateProgressForTask:forPhotoLibrary:andSystemTask:reuseCachedValue:"
+ "v40@0:8q16@\"NSURL\"24@?<v@?q@\"NSError\">32"
+ "v40@0:8q16@24@?32"
+ "vcp_allResourcesForAsset:"
+ "vcp_setFlags:"
+ "vcp_setVersion:"
- "\x02\x16"
- "\x11&"
- "  [%!@(MISSING)] Reusing analysis results from compute sync"
- "!#\x13"
- "%!@(MISSING) Creating sandbox extension for directory (%!@(MISSING))"
- "%!@(MISSING) Failed to generate sandbox extension (%!@(MISSING))"
- "%!@(MISSING) Received request for VU index URL (%!@(MISSING))"
- "%!@(MISSING) Retriving AX Image Caption model"
- "%!@(MISSING) Retriving MiCa Image Caption model"
- "%!@(MISSING) Retriving MiCa Video Caption model"
- "%!@(MISSING) Returning sandbox extension for Gallery directory URL ..."
- "%!@(MISSING) Reusing analysis results from compute sync"
- "%!@(MISSING) existing analyses from Compute Sync %!@(MISSING)"
- "%!@(MISSING) missing analyses from Compute Sync %!@(MISSING)"
- "@80@0:8Q16Q24@32@40@48@56@64@72"
- "@84@0:8@16Q24Q32@40Q48B56@60B68@72B80"
- "CSUImageCaptionerConfigurationForRevision:error:"
- "CSUVideoCaptionerConfigurationForRevision:error:"
- "MADOTAMaintenanceProcessingTask_DownloadMiCaImageCaptionModel"
- "MADOTAMaintenanceProcessingTask_DownloadMiCaVideoCaptionModel"
- "[%!@(MISSING)] Failed to report BGST Checkpoint %!d(MISSING)u for feature code %!@(MISSING) - %!@(MISSING) - %!@(MISSING)"
- "[%!@(MISSING)] Failed to report BGST Custom Checkpoint %!d(MISSING)u for taskIdentifier %!@(MISSING). Error: %!@(MISSING)"
- "[%!@(MISSING)] MADBGCheckpoint %!d(MISSING)u is not within range [%!d(MISSING)u, %!d(MISSING)u]"
- "[%!@(MISSING)] Reported BGST Checkpoint %!d(MISSING)u for feature code %!@(MISSING) - %!@(MISSING)"
- "[%!@(MISSING)] Reported BGST Custom Checkpoint %!d(MISSING)u for task taskIdentifier %!@(MISSING)"
- "[%!@(MISSING)] Reusing analysis results from compute sync"
- "[%!@(MISSING)] existing analyses from Compute Sync %!@(MISSING)"
- "[%!@(MISSING)] missing analyses from Compute Sync %!@(MISSING)"
- "[%!@(MISSING)][%!@(MISSING)] Processing asset done"
- "[%!@(MISSING)][%!@(MISSING)] Reusing analysis results from compute sync"
- "[MADPhotosFullAssetProcessingTask] MiCa image caption OTA model not available, skip MediaAnalysisTypeCaptionImage analysis"
- "[MADPhotosFullAssetProcessingTask] MiCa image caption in-build model available"
- "[MADPhotosFullAssetProcessingTask] MiCa image caption in-build model not available, try OTA"
- "[MADPhotosFullAssetProcessingTask] MiCa video caption OTA model not available, skip MediaAnalysisTypeCaptionVideo analysis"
- "[MADPhotosFullAssetProcessingTask] MiCa video caption in-build model available"
- "[MADPhotosFullAssetProcessingTask] MiCa video caption in-build model not available, try OTA"
- "_getCompleteDateBasedOn:forTaskID:fromDatabase:withCompleteTimestampKey:checkpointTimestampKey:coreAnalyticsEventKey:currentDate:andStartDate:"
- "downloadResourceForAsset:"
- "entryWithAsset:previousStatus:previousAttempts:lastAttemptDate:analysisTypes:imageOnlyAnalysis:existingAnalysis:isAnalysisFromComputeSync:downloadResource:needDownload:"
- "initWithAsset:previousStatus:previousAttempts:lastAttemptDate:analysisTypes:imageOnlyAnalysis:existingAnalysis:isAnalysisFromComputeSync:downloadResource:needDownload:"
- "initWithConfiguration:"
- "initWithConfiguration:error:"
- "mad_existingAnalysisFromComputeSyncForAsset:"
- "mad_progressPercentageForTaskID:withPHTaskID:priority:error:"
- "mode"
- "requestVUIndexDirectoryURLForPhotoLibraryURL:reply:"
- "retrieveAssetOnce:petWatchDog:cancelBlock:"

```
