## IMDPersistence

> `/System/Library/PrivateFrameworks/IMDPersistence.framework/IMDPersistence`

```diff

-1402.300.164.2.2
-  __TEXT.__text: 0x11a26c
-  __TEXT.__auth_stubs: 0x2760
-  __TEXT.__objc_methlist: 0x37cc
-  __TEXT.__const: 0xb5a
-  __TEXT.__cstring: 0x395a1
-  __TEXT.__oslogstring: 0x1a065
-  __TEXT.__gcc_except_tab: 0xe488
+1402.300.181.2.14
+  __TEXT.__text: 0x11c26c
+  __TEXT.__auth_stubs: 0x2830
+  __TEXT.__objc_methlist: 0x37d4
+  __TEXT.__const: 0xb6a
+  __TEXT.__cstring: 0x395b1
+  __TEXT.__oslogstring: 0x1a265
+  __TEXT.__gcc_except_tab: 0xe50c
   __TEXT.__ustring: 0x434
   __TEXT.__dlopen_cstrs: 0x2a4
   __TEXT.__swift5_typeref: 0x1fc

   __TEXT.__swift5_capture: 0xe4
   __TEXT.__swift5_types: 0x18
   __TEXT.__swift5_reflstr: 0x6f
-  __TEXT.__unwind_info: 0x4e10
-  __TEXT.__eh_frame: 0x130
+  __TEXT.__unwind_info: 0x4e50
+  __TEXT.__eh_frame: 0x178
   __TEXT.__objc_classname: 0xa93
-  __TEXT.__objc_methname: 0x1056c
+  __TEXT.__objc_methname: 0x10649
   __TEXT.__objc_methtype: 0x23ae
-  __TEXT.__objc_stubs: 0xdc00
-  __DATA_CONST.__got: 0xe88
+  __TEXT.__objc_stubs: 0xdc40
+  __DATA_CONST.__got: 0xe90
   __DATA_CONST.__const: 0x10f60
   __DATA_CONST.__objc_classlist: 0x268
   __DATA_CONST.__objc_catlist: 0x20
   __DATA_CONST.__objc_protolist: 0x110
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_selrefs: 0x3b58
+  __DATA_CONST.__objc_selrefs: 0x3b98
   __DATA_CONST.__objc_protorefs: 0x70
   __DATA_CONST.__objc_superrefs: 0xe8
   __DATA_CONST.__objc_arraydata: 0x190
-  __AUTH_CONST.__auth_got: 0x13c0
-  __AUTH_CONST.__auth_ptr: 0xd0
-  __AUTH_CONST.__const: 0x1a48
+  __AUTH_CONST.__auth_got: 0x1428
+  __AUTH_CONST.__auth_ptr: 0xf8
+  __AUTH_CONST.__const: 0x1a70
   __AUTH_CONST.__cfstring: 0x10ca0
   __AUTH_CONST.__objc_const: 0x6880
   __AUTH_CONST.__objc_intobj: 0x138

   __AUTH.__objc_data: 0x308
   __AUTH.__data: 0x28
   __DATA.__objc_ivar: 0x16c
-  __DATA.__data: 0xac0
+  __DATA.__data: 0xab0
   __DATA.__bss: 0x4a0
-  __DATA.__common: 0x40
+  __DATA.__common: 0x58
   __DATA_DIRTY.__objc_data: 0x17a0
-  __DATA_DIRTY.__data: 0xeb8
+  __DATA_DIRTY.__data: 0xec8
   __DATA_DIRTY.__bss: 0x580
   - /System/Library/Frameworks/AppIntents.framework/AppIntents
   - /System/Library/Frameworks/Contacts.framework/Contacts

   - /usr/lib/swift/libswiftsimd.dylib
   - /usr/lib/swift/libswiftsys_time.dylib
   - /usr/lib/swift/libswiftunistd.dylib
-  Functions: 4524
-  Symbols:   2354
-  CStrings:  7434
+  Functions: 4549
+  Symbols:   2358
+  CStrings:  7455
 
Symbols:
+ _OBJC_CLASS_$_NSFileHandle
+ __IMDCoreSpotlightCNContactForHandleID
+ __IMDExecuteBlockForTesting
+ __swiftImmortalRefCount
+ _swift_willThrow
- _IMFileURLIsActuallyAnimated
CStrings:
+ "AnimatedImages"
+ "Error reading source file: %!@(MISSING)"
+ "Failed to copy first frame of multiframe preview"
+ "Failed to copy first frame: %!@(MISSING)"
+ "Failed to generate a destination URL for a "
+ "Failed to read first frame"
+ "Failed to read first frame- data wrong length: %!l(MISSING)d"
+ "Failed to read frame length"
+ "Failed to read frame length - data wrong length: %!l(MISSING)d"
+ "File too small: %!l(MISSING)lu"
+ "Not attempting to index malformed message/chat pair. message dict has %!{(MISSING)public}lld entries, chat dict has %!{(MISSING)public}lld entries. %!@(MISSING) %!@(MISSING)"
+ "Opening source file: %!s(MISSING)"
+ "The image is animated - lets copy the first frame"
+ "WHERE cmj.chat_id in (SELECT c.rowid FROM chat c WHERE c.chat_identifier = ? AND c.service_name = ?) "
+ "_im_isEqualToContact:"
+ "closeAndReturnError:"
+ "closeFile"
+ "copyFirstFrameOfMultiFrameImageAtFileURL:toFileURL:"
+ "createFileAtPath:contents:attributes:"
+ "fileHandleForReadingFromURL:error:"
+ "imagePreviewIsMultiFrameAtFileURL:"
+ "readDataOfLength:"
+ "seekToFileOffset:"
- "UTI might be animated (%!@(MISSING)) but it was sent by an unknown sender, so skipping preview."
- "WHERE cmj.chat_id = (SELECT c.rowid FROM chat c WHERE c.chat_identifier = ? AND c.service_name = ?) "
- "_fileURLIsActuallyAnimated:"

```
