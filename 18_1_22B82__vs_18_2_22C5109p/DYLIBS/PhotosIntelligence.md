## PhotosIntelligence

> `/System/Library/PrivateFrameworks/PhotosIntelligence.framework/PhotosIntelligence`

```diff

-712.0.240.0.0
-  __TEXT.__text: 0x46004c
-  __TEXT.__auth_stubs: 0x4960
-  __TEXT.__objc_methlist: 0x3f30
-  __TEXT.__cstring: 0x1e307
-  __TEXT.__swift5_typeref: 0x8f2e
-  __TEXT.__const: 0x20050
-  __TEXT.__swift5_reflstr: 0xae0f
-  __TEXT.__swift5_assocty: 0xf58
-  __TEXT.__swift5_fieldmd: 0xad60
-  __TEXT.__constg_swiftt: 0x930c
-  __TEXT.__swift5_builtin: 0x474
+720.1.111.0.0
+  __TEXT.__text: 0x47b86c
+  __TEXT.__auth_stubs: 0x4a60
+  __TEXT.__objc_methlist: 0x3f60
+  __TEXT.__cstring: 0x1e790
+  __TEXT.__swift5_typeref: 0x931c
+  __TEXT.__const: 0x20ce0
+  __TEXT.__swift5_reflstr: 0xb1cf
+  __TEXT.__swift5_assocty: 0xfa0
+  __TEXT.__swift5_fieldmd: 0xb114
+  __TEXT.__constg_swiftt: 0x94f4
+  __TEXT.__swift5_builtin: 0x49c
   __TEXT.__swift5_protos: 0x90
-  __TEXT.__swift5_proto: 0x1dd4
-  __TEXT.__swift5_types: 0xc20
-  __TEXT.__oslogstring: 0x16930
-  __TEXT.__swift5_mpenum: 0x184
-  __TEXT.__swift5_capture: 0x21b8
+  __TEXT.__swift5_proto: 0x1ea4
+  __TEXT.__swift5_types: 0xc5c
+  __TEXT.__oslogstring: 0x17410
+  __TEXT.__swift5_mpenum: 0x194
+  __TEXT.__swift5_capture: 0x2090
   __TEXT.__gcc_except_tab: 0x7a4
   __TEXT.__ustring: 0x4
   __TEXT.__dlopen_cstrs: 0xce
-  __TEXT.__unwind_info: 0x11458
-  __TEXT.__eh_frame: 0x26e60
+  __TEXT.__unwind_info: 0x11a88
+  __TEXT.__eh_frame: 0x27b28
   __TEXT.__objc_classname: 0xa0b
-  __TEXT.__objc_methname: 0x11c05
+  __TEXT.__objc_methname: 0x11dab
   __TEXT.__objc_methtype: 0x19b2
   __TEXT.__objc_stubs: 0x8a80
-  __DATA_CONST.__got: 0x13a8
+  __DATA_CONST.__got: 0x13f0
   __DATA_CONST.__const: 0x17c0
   __DATA_CONST.__objc_classlist: 0x6a8
   __DATA_CONST.__objc_catlist: 0x30
   __DATA_CONST.__objc_protolist: 0x190
   __DATA_CONST.__objc_imageinfo: 0x8
-  __DATA_CONST.__objc_selrefs: 0x39c0
+  __DATA_CONST.__objc_selrefs: 0x3a28
   __DATA_CONST.__objc_protorefs: 0xa0
   __DATA_CONST.__objc_superrefs: 0x158
   __DATA_CONST.__objc_arraydata: 0x1e0
-  __AUTH_CONST.__auth_got: 0x24c0
-  __AUTH_CONST.__auth_ptr: 0x14a0
-  __AUTH_CONST.__const: 0x1d9d0
-  __AUTH_CONST.__cfstring: 0x4c80
-  __AUTH_CONST.__objc_const: 0x116b0
+  __AUTH_CONST.__auth_got: 0x2540
+  __AUTH_CONST.__auth_ptr: 0x14e0
+  __AUTH_CONST.__const: 0x1dd20
+  __AUTH_CONST.__cfstring: 0x4d00
+  __AUTH_CONST.__objc_const: 0x11710
   __AUTH_CONST.__objc_doubleobj: 0x120
-  __AUTH_CONST.__objc_intobj: 0x420
+  __AUTH_CONST.__objc_intobj: 0x438
   __AUTH_CONST.__objc_dictobj: 0x50
   __AUTH_CONST.__objc_arrayobj: 0x198
   __AUTH.__objc_data: 0x5c8
-  __AUTH.__data: 0x280
+  __AUTH.__data: 0x3a0
   __DATA.__objc_ivar: 0x350
-  __DATA.__data: 0x8958
+  __DATA.__data: 0x8c08
   __DATA.__objc_stublist: 0x38
-  __DATA.__bss: 0x39128
-  __DATA.__common: 0x580
+  __DATA.__bss: 0x3ab28
+  __DATA.__common: 0x588
   __DATA_DIRTY.__objc_data: 0x3a68
-  __DATA_DIRTY.__data: 0x8c88
+  __DATA_DIRTY.__data: 0x8d18
   __DATA_DIRTY.__bss: 0x910
   __DATA_DIRTY.__common: 0x78
   - /System/Library/Frameworks/Accelerate.framework/Accelerate

   - /usr/lib/swift/libswiftsimd.dylib
   - /usr/lib/swift/libswiftsys_time.dylib
   - /usr/lib/swift/libswiftunistd.dylib
-  Functions: 26061
-  Symbols:   10365
-  CStrings:  7129
+  Functions: 26591
+  Symbols:   10502
+  CStrings:  7214
 
Symbols:
+ _OBJC_CLASS_$_PHSearchQueryGroundingPersonalEvent
+ _PLPhotoAnalysisMusicCurationSpecificationArtists
+ _PLPhotoAnalysisMusicCurationSpecificationGenres
+ _PLPhotoAnalysisMusicCurationSpecificationTitles
+ _PNStandbyModeAvailable
+ _memcmp
- _PLPhotoAnalysisMusicCurationSpecificationArtist
- _PLPhotoAnalysisMusicCurationSpecificationGenre
- _PLPhotoAnalysisMusicCurationSpecificationTitle
- _PNAmbientPhotoFrameEnabled
CStrings:
+ "\n    Associated City Name: "
+ "\n    Associated Place Name: "
+ " (dateChecked = "
+ " selected events"
+ "%!s(MISSING) throw any ambiguity error.\nThe prompt ambiguity state is %!s(MISSING) and the person/location/date/personal event query tokens are %!s(MISSING).\nThe music related query tokens are %!s(MISSING)."
+ "' not allowed. (dateChecked = "
+ "' personal event token"
+ "' public event token"
+ "', failed retrieval"
+ "(Apple Music Search) Genre %!s(MISSING) is mood dupe so skip adding it to the search prompt"
+ ",\n    Suggested events: "
+ ",\nhasMusicArtist: "
+ ", hasPersonAgeType: "
+ ", hasPersonalEvent: "
+ ", hasPublicEvent: "
+ ", hasSortOrder: "
+ ", highlightUUIDs: "
+ "6Bv7G1ajzYW5x54ncLHHWm2mkkg."
+ "Add %!l(MISSING)d event suggestions to query token \"%!{(MISSING)private}s\""
+ "Added assets to the disambiguated personal event query tokens with %!{(MISSING)private}s"
+ "Added the current city name %!{(MISSING)private}s to selected city name list: %!{(MISSING)private}s"
+ "Added the current place name %!{(MISSING)private}s to selected place name list: %!{(MISSING)private}s"
+ "Apple Music Storefront '"
+ "C8jv0pAjKecGdOLbemcid3-Qn9w."
+ "Complete retrieval failed for '%!{(MISSING)private}@' WHAT token: %!@(MISSING)"
+ "Complete retrieval failed for '%!{(MISSING)private}@' public event token: %!@(MISSING)"
+ "Dropping candidate prompt (%!{(MISSING)private}s). It shares the same city name with selected prompts (city names from selected prompts=%!{(MISSING)private}s)"
+ "Dropping candidate prompt (%!{(MISSING)private}s). It shares the same place name with selected prompts (place names from selected prompts=%!{(MISSING)private}s)"
+ "During %!s(MISSING) batch search, query '%!{(MISSING)sensitive}s' returned error %!@(MISSING)"
+ "Embedding retrieval failed for '%!{(MISSING)private}@' personal event token: %!@(MISSING)"
+ "Error retrieving assets for query '%!{(MISSING)sensitive}s' with queries %!s(MISSING), error: %!s(MISSING)"
+ "Error when validating suggestion with query '%!{(MISSING)sensitive}s': %!@(MISSING)"
+ "Finished producing event suggestions for query token \"%!{(MISSING)private}s\""
+ "Grounded query annotation=%!{(MISSING)sensitive}s and photoKitAnnotatedQueryString=%!{(MISSING)sensitive}@"
+ "MemoryCreationTimeEventDisambiguation"
+ "Metadata retrieval failed for '%!{(MISSING)private}@' WHAT token: %!@(MISSING)"
+ "Metadata retrieval failed for '%!{(MISSING)private}@' personal event token: %!@(MISSING)"
+ "Metadata retrieval failed for '%!{(MISSING)private}@' public event token: %!@(MISSING)"
+ "Metadata retrieval failed for '%!{(MISSING)private}@' query token: %!@(MISSING)"
+ "No assets that are used to fetch moments"
+ "No assets to be used for generating the event suggestions"
+ "No highlight uuid for \"%!{(MISSING)private}@\""
+ "No key asset is found for event %!s(MISSING)"
+ "No moments that are used to fetch Day Highlights"
+ "No relevant suggestion is found for Day Highlight %!s(MISSING)"
+ "Not eligible for Apple Music. Error "
+ "Not eligible for Apple Music. permissionDenied (dateChecked = "
+ "Not eligible for Apple Music. privacyAcknowledgementRequired (dateChecked = "
+ "Not signed into Apple Music (dateChecked = "
+ "PHSearchEntityCategoryTypeFromStringValue:"
+ "PNAssetCurationLocale"
+ "PNGlobalTraitsLocale"
+ "PNStorytellerLocale"
+ "Producing event suggestions for disambiguation"
+ "QqhafbzEEY6t2RhXQDJOspjHFiA."
+ "Query token \"%!{(MISSING)private}s\" needs event disambiguation"
+ "QueryGenerator.addAssetsToDisambiguatedPersonalEventQueryTokens"
+ "QueryGenerator.addAssetsToQueryTokensForEventDisambiguation"
+ "QueryGenerator.addDisambiguationSuggestionsToQueryTokens"
+ "QueryGenerator.produceEventSuggestions"
+ "QueryToken \"%!{(MISSING)private}s\" needs date disambiguation"
+ "Retrieval failed for fallback query '"
+ "Retrieval failed for fallback query '%!{(MISSING)private}s': %!@(MISSING)"
+ "Retrieval failed for shot query '%!{(MISSING)private}s': %!@(MISSING)"
+ "Skip adding event suggestions to query tokens for disambiguation since the query disambiguation producer is nil"
+ "StoryMusicCurator prewarm"
+ "StoryMusicCurator prewarm done"
+ "The number of assets per highlight = %!s(MISSING)"
+ "The queryDisambiguationSuggestionProducer is nil, immediately return all the query tokens"
+ "There are %!l(MISSING)d assets that are used for generating event suggestions"
+ "There are no cached assets for highlights = %!s(MISSING), fallback to fetch assets from Photos database"
+ "Unable to fetch Day Highlights for the given uuids = %!s(MISSING)"
+ "Unable to fetch curated asset for event \"%!s(MISSING)\""
+ "Unable to support %!l(MISSING)d query tokens that need date and event disambiguation"
+ "Update and add assets to graph meaningful personal event query tokens with %!s(MISSING),\nscoped with %!s(MISSING)"
+ "User grounded query annotation=%!{(MISSING)sensitive}s and photoKitAnnotatedQueryString=%!{(MISSING)sensitive}@"
+ "VhWxh34MnrSMlHvhso7mv8YGK6E."
+ "XFGGKjM8MOeIg-5QEM2Jvs9v_AA."
+ "[Curation] Retrieval failed for shot query '"
+ "[QU] Complete retrieval failed for '"
+ "[QU] Embedding retrieval failed for '"
+ "[QU] Metadata retrieval failed for '"
+ "[isUserEligibleForAppleMusic] Apple Music Storefront '%!s(MISSING)' not allowed"
+ "[isUserEligibleForAppleMusic] Checking Apple Music Subscription status..."
+ "[isUserEligibleForAppleMusic] Not eligible for Apple Music. Error: %!@(MISSING)"
+ "[isUserEligibleForAppleMusic] Not eligible for Apple Music. permissionDenied"
+ "[isUserEligibleForAppleMusic] Not eligible for Apple Music. privacyAcknowledgementRequired"
+ "[isUserEligibleForAppleMusic] Not signed into Apple Music"
+ "_OoN68_-Vq1C3-7J9F_9-ytvooc."
+ "addAssetsToGraphMeaningfulPersonalEventQueryTokens"
+ "appleMusicSmartSearchUsageScenario"
+ "assetCurationLocale"
+ "associatedCityName"
+ "associatedPlaceName"
+ "bIdp3EurrxVzzq2D7nw9ct8P65s."
+ "disambiguationSuggestionDataSource"
+ "fetchAssetsWithMediaType:options:"
+ "fetchKeyAssetByHighlightUUIDForHighlights:options:"
+ "fetchPhotosHighlightUUIDByMomentUUIDForMomentUUIDs:options:"
+ "generationSummaryLock"
+ "globalTraitsLocale"
+ "highlightUUIDs"
+ "initForPersonalEventFilterWithHighlightUUIDs:"
+ "initWithMeaningLabel:highlightUUIDs:"
+ "kPNNumberOfEventSuggestions"
+ "kPNUseOtherQueryTokenAssetsForEventDisambiguation"
+ "lptzSCwi3CupsiUT-7ky0dGd0sg."
+ "m7X0IZWUhLuQlmnic3IHOk6Sz5k."
+ "musicInQUPrompt"
+ "noMusicInPrompt"
+ "numberOfEventSuggestions"
+ "numberOfTokensWithCommonAssets"
+ "personalEventHighlightUUIDs"
+ "personalEventIsNotGroundedToAnyDate"
+ "queryAnnotation"
+ "rFnyHqyF6ry5y2gJRGJD0Wcbjv4."
+ "relevanceScoreTuple"
+ "removeAttribute:range:"
+ "storytellerLocale"
+ "stringValueForPHSearchEntityCategoryType:"
+ "totalNumberOfCommonAssets"
+ "useOtherQueryTokenAssetsForEventDisambiguation"
+ "userDisambiguation"
+ "xmlEncoder"
+ "{\n    Number of suggested events: "
+ "{{ specialToken.chat.role.system"
+ "{{ specialToken.chat.role.system.default }}A conversation between a user making a story from their photos and a creative writer assistant who imagines visual themes for the user story<n>The visual themes are short, no more than a few words and must be new thematic content to expand on what the user story is, not duplicating any info from the query<n>Additional information about the photos the user has may be available, and can inform the visual themes, especially if there is a location but the request is about a person<n>If the request is vague, then the visual themes should be broad since little information is available<n>But if the request is more detailed, then the visual themes can be more detailed and precise<n>The assistant responds with nothing except for the visual themes formatted as a JSON parseable list of strings, where each element is a relevant visual themes<n><n>Visual themes cannot be location names, or emotive and vague themes such as Togetherness or Leisure<n>Instead, visual themes usually fall under the following categories:<n>- Settings, describing the scene or backdrop of the photos, such Restaurant or Sunset<n>- Objects featured in the story, or which people might interact with, such as Food or Sports Equipment<n>- Actions in the photos or which people may be doing, such as Laughing{{ specialToken.chat.component.turnEnd }}{{ specialToken.chat.role.user }}I want to experience a story about: \"{{ freeformStoryPromptQuery }}\"<n>Provide the following number of visual themes: {{ numRequestedTraits }}<n>Children are in my photos: {{ freeformHasChildren }}<n>Pets in my photos: {{ freeformHasPets }}<n>People with these relationships to me are in my photos: {{ freeformLifeContextRelationship }}<n>My home location: {{ freeformLifeContextHomeLocation }}<n>Some of the top locations present in my photos: {{ freeformLifeContextTopLocations }}{{ specialToken.chat.component.turnEnd }}{{ specialToken.chat.role.assistant }}"
+ "{{ specialToken.chat.role.system.default }}A conversation between a user requesting a story from their photos and a creative writer assistant who responds with a story<n><n>Respond in JSON with these keys and values in order:<n>- traits: list of strings, visual themes selected from the photos<n>- story: list of chapters as defined below<n>- cover: string, photo caption describing the title card<n>- title: string, title of story<n>- subtitle: string, safer version of the title<n><n>Each chapter is a JSON with these keys and values in order:<n>- chapter: string, title of chapter<n>- fallback: string, generic photo caption summarizing chapter theme<n>- shots: list of strings, photo captions in chapter<n><n>Here are the story guidelines you must obey:<n>- The story should be about the intent of the user<n>- The story should contain a clear arc<n>- The story should be diverse, that is, do not overly focus the entire story on one very specific theme or trait<n>- Do not write a story that is religious, political, harmful, violent, sexual, filthy or in anyway negative, sad or provocative<n><n>Here are the photo caption list guidelines you must obey:<n>- You can choose to include chapters or photo captions related to relationships, pets or locations if it is relevant to the user request<n>- All photo captions within a chapter should be distinct<n>- Ignore all references to music, artists or song titles. None of the shots, chapters or titles should contain references to music in any way<n>- There should be no reference to time periods or time of day in any chapters or photo captions<n><n>Here are the title guidelines you must obey:<n>- The title should summarize all the shot lists and chapters such that if any chapters or shots are missing the title still makes sense<n>- The title should avoid being funny, quirky or using references to specific culture or events<n>- Never use profanity or words that are not appropriate for children<n>- If the user query contains a location which is also their home location, do not create a title that refers to a trip<n>- If the story is about people do not make the title describe with non-human entities like fictional creatures or animals{{ specialToken.chat.component.turnEnd }}{{ specialToken.chat.role.user }}Write me a story about: \"{{ freeformStoryPromptQuery }}\"<n>Visual themes in my photos: {{ freeformInputTraits }}<n>Pick this number of visual themes to write the story on: {{ freeformNumSelectedTraits }}<n>I want the story structure to be: {{ freeformStoryStructure }}<n>Write this many chapters in the story: {{ freeformNumChapters }}<n>Include at least this many photo captions in each chapter: {{ freeformMinNumShots }}<n>Children are in my photos: {{ freeformHasChildren }}<n>Pets are in my photos: {{ freeformHasPets }}<n>People with these relationships to me are in my photos: {{ freeformLifeContextRelationship }}<n>My home location: {{ freeformLifeContextHomeLocation }}<n>Some of the top locations present in my photos: {{ freeformLifeContextTopLocations }}{{ specialToken.chat.component.turnEnd }}{{ specialToken.chat.role.assistant }}"
+ "},\n    disambiguationSuggestions: "
- "%!s(MISSING) throw any ambiguity error.\nThe prompt ambiguity state is %!s(MISSING) and the person/location/date query tokens are %!s(MISSING).\nThe music related query tokens are %!s(MISSING)."
- ", hasMusicArtist: "
- "/Library/Caches/com.apple.xbs/Sources/Photos/Projects/PhotosIntelligence/Framework/Stories/Freeform/FreeformStoryChapterCurator.swift"
- "/Library/Caches/com.apple.xbs/Sources/Photos/Projects/PhotosIntelligence/Framework/Stories/Freeform/FreeformStoryGenerator+Chapters.swift"
- "/Library/Caches/com.apple.xbs/Sources/Photos/Projects/PhotosIntelligence/Framework/Stories/Freeform/FreeformStoryGenerator+KeyAsset.swift"
- "/Library/Caches/com.apple.xbs/Sources/Photos/Projects/PhotosIntelligence/Framework/Stories/Freeform/FreeformStoryGenerator.swift"
- "2U0DY6mS_XmFjut3ea3NjmOmkJ4."
- "88lr9cydYRQHhmxz8Yuk8qKgHus."
- "Apple Music Not Eligible"
- "Apple Music Storefront not allowed "
- "BOdzDh4DZPv4VL-DGIhpfz9EJHk."
- "CSAttributedEntityKeyFromPHSearchEntityCategoryType:"
- "Down-casted Array element failed to match the target type\nExpected "
- "Error checking Apple Music Eligibility "
- "Error retrieving assets by query with queries %!s(MISSING), error: %!s(MISSING)"
- "Error retrieving assets by query with queries %!{(MISSING)sensitive}s, error: %!s(MISSING)"
- "Error when validating suggestion %!@(MISSING)"
- "Grounded query annotation=%!{(MISSING)sensitive}s and coreSpotlightAnnotatedString=%!{(MISSING)sensitive}@"
- "IozLyTjTB_l346LDAdJ0452RHHw."
- "No personal event query tokens"
- "PNUseTimeOfDayInARD"
- "Perform %!s(MISSING) batch search is error=%!@(MISSING)"
- "Update and add assets to personal event query tokens with %!s(MISSING),\nscoped with %!s(MISSING)"
- "User grounded query annotation=%!{(MISSING)sensitive}s and coreSpotlightAnnotatedString=%!{(MISSING)sensitive}@"
- "[isUserEligibleForAppleMusic] Can't play Apple Music %!s(MISSING)"
- "[isUserEligibleForAppleMusic] Checking MusicSubscription status"
- "[isUserEligibleForAppleMusic] canPlayCatalogContent = false. (%!s(MISSING) is not an allowed storefront)"
- "[isUserEligibleForAppleMusic] canPlayCatalogContent error: %!@(MISSING)"
- "afternoon"
- "dawn"
- "evening"
- "gIfbhKI9Ur5GYQLzY9UXwm7ie_Y."
- "generationSummary"
- "liYzNMK5rnWjb3WDZJlzdBFO_Rg."
- "midnight"
- "morning"
- "night"
- "noon"
- "rem3ZL6z4NP_SAlxS0QeY8jTbyE."
- "useTimeOfDayInARD"
- "vzQYMZgvWBSFE1ZDOwue2NoZLzo."
- "xqOfyOYdnSX9yV1Xt6QSZ4S6YiE."
- "xqzQB3XQNyGq_w6PW_R4p9DeGh0."
- "{{ specialToken.chat.role.system }}A conversation between a user making a story from their photos and a creative writer assistant who imagines visual themes for the user story<n>The visual themes are short, no more than a few words and must be new thematic content to expand on what the user story is, not duplicating any info from the query<n>Additional information about the photos the user has may be available, and can inform the visual themes, especially if there is a location but the request is about a person<n>If the request is vague, then the visual themes should be broad since little information is available<n>But if the request is more detailed, then the visual themes can be more detailed and precise<n>The assistant responds with nothing except for the visual themes formatted as a JSON parseable list of strings, where each element is a relevant visual themes<n><n>Visual themes cannot be location names, or emotive and vague themes such as Togetherness or Leisure<n>Instead, visual themes usually fall under the following categories:<n>- Settings, describing the scene or backdrop of the photos, such Restaurant or Sunset<n>- Objects featured in the story, or which people might interact with, such as Food or Sports Equipment<n>- Actions in the photos or which people may be doing, such as Laughing{{ specialToken.chat.component.turnEnd }}{{ specialToken.chat.role.user }}I want to experience a story about: \"{{ freeformStoryPromptQuery }}\"<n>Provide the following number of visual themes: {{ numRequestedTraits }}<n>Children are in my photos: {{ freeformHasChildren }}<n>Pets in my photos: {{ freeformHasPets }}<n>People with these relationships to me are in my photos: {{ freeformLifeContextRelationship }}<n>My home location: {{ freeformLifeContextHomeLocation }}<n>Some of the top locations present in my photos: {{ freeformLifeContextTopLocations }}{{ specialToken.chat.component.turnEnd }}{{ specialToken.chat.role.assistant }}"
- "{{ specialToken.chat.role.system }}A conversation between a user requesting a story from their photos and a creative writer assistant who responds with a story<n><n>Respond in JSON with these keys and values in order:<n>- traits: list of strings, visual themes selected from the photos<n>- story: list of chapters as defined below<n>- cover: string, photo caption describing the title card<n>- title: string, title of story<n>- subtitle: string, safer version of the title<n><n>Each chapter is a JSON with these keys and values in order:<n>- chapter: string, title of chapter<n>- fallback: string, generic photo caption summarizing chapter theme<n>- shots: list of strings, photo captions in chapter<n><n>Here are the story guidelines you must obey:<n>- The story should be about the intent of the user<n>- The story should contain a clear arc<n>- The story should be diverse, that is, do not overly focus the entire story on one very specific theme or trait<n>- Do not write a story that is religious, political, harmful, violent, sexual, filthy or in anyway negative, sad or provocative<n><n>Here are the photo caption list guidelines you must obey:<n>- You can choose to include chapters or photo captions related to relationships, pets or locations if it is relevant to the user request<n>- All photo captions within a chapter should be distinct<n>- Ignore all references to music, artists or song titles. None of the shots, chapters or titles should contain references to music in any way<n>- There should be no reference to time periods or time of day in any chapters or photo captions<n><n>Here are the title guidelines you must obey:<n>- The title should summarize all the shot lists and chapters such that if any chapters or shots are missing the title still makes sense<n>- The title should avoid being funny, quirky or using references to specific culture or events<n>- Never use profanity or words that are not appropriate for children<n>- If the user query contains a location which is also their home location, do not create a title that refers to a trip<n>- If the story is about people do not make the title describe with non-human entities like fictional creatures or animals{{ specialToken.chat.component.turnEnd }}{{ specialToken.chat.role.user }}Write me a story about: \"{{ freeformStoryPromptQuery }}\"<n>Visual themes in my photos: {{ freeformInputTraits }}<n>Pick this number of visual themes to write the story on: {{ freeformNumSelectedTraits }}<n>I want the story structure to be: {{ freeformStoryStructure }}<n>Write this many chapters in the story: {{ freeformNumChapters }}<n>Include at least this many photo captions in each chapter: {{ freeformMinNumShots }}<n>Children are in my photos: {{ freeformHasChildren }}<n>Pets are in my photos: {{ freeformHasPets }}<n>People with these relationships to me are in my photos: {{ freeformLifeContextRelationship }}<n>My home location: {{ freeformLifeContextHomeLocation }}<n>Some of the top locations present in my photos: {{ freeformLifeContextTopLocations }}{{ specialToken.chat.component.turnEnd }}{{ specialToken.chat.role.assistant }}"

```
