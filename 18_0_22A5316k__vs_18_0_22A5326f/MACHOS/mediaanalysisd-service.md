## mediaanalysisd-service

> `/System/Library/PrivateFrameworks/MediaAnalysis.framework/mediaanalysisd-service`

```diff

-255.69.4.0.0
-  __TEXT.__text: 0x17c590
-  __TEXT.__auth_stubs: 0x1140
+255.73.2.11.1
+  __TEXT.__text: 0x17d1ac
+  __TEXT.__auth_stubs: 0x1100
   __TEXT.__objc_stubs: 0x11e60
-  __TEXT.__objc_methlist: 0x8188
-  __TEXT.__cstring: 0x13040
-  __TEXT.__objc_classname: 0x1bcd
-  __TEXT.__objc_methname: 0x1788a
-  __TEXT.__objc_methtype: 0x34d1
-  __TEXT.__const: 0x3f8
-  __TEXT.__gcc_except_tab: 0x28304
-  __TEXT.__oslogstring: 0x1d0ae
+  __TEXT.__objc_methlist: 0x8118
+  __TEXT.__cstring: 0x13081
+  __TEXT.__objc_classname: 0x1bad
+  __TEXT.__objc_methname: 0x17ec3
+  __TEXT.__objc_methtype: 0x34e1
+  __TEXT.__const: 0x418
+  __TEXT.__gcc_except_tab: 0x28394
+  __TEXT.__oslogstring: 0x1d66f
   __TEXT.__dlopen_cstrs: 0x59a
   __TEXT.__info_plist: 0x623
-  __TEXT.__unwind_info: 0x5808
-  __DATA_CONST.__auth_got: 0x8b8
-  __DATA_CONST.__got: 0xd48
-  __DATA_CONST.__const: 0x5a90
-  __DATA_CONST.__cfstring: 0xbd40
-  __DATA_CONST.__objc_classlist: 0x650
+  __TEXT.__unwind_info: 0x5838
+  __DATA_CONST.__auth_got: 0x898
+  __DATA_CONST.__got: 0xd50
+  __DATA_CONST.__const: 0x5a18
+  __DATA_CONST.__cfstring: 0xbda0
+  __DATA_CONST.__objc_classlist: 0x648
   __DATA_CONST.__objc_catlist: 0x48
   __DATA_CONST.__objc_protolist: 0xd0
   __DATA_CONST.__objc_imageinfo: 0x8
   __DATA_CONST.__objc_protorefs: 0x80
   __DATA_CONST.__objc_classrefs: 0x10
   __DATA_CONST.__objc_superrefs: 0x4c8
-  __DATA_CONST.__objc_intobj: 0x22c8
-  __DATA_CONST.__objc_arraydata: 0x7c8
-  __DATA_CONST.__objc_arrayobj: 0x5a0
+  __DATA_CONST.__objc_intobj: 0x22e0
+  __DATA_CONST.__objc_arraydata: 0x7b0
+  __DATA_CONST.__objc_arrayobj: 0x5b8
   __DATA_CONST.__objc_doubleobj: 0xd0
   __DATA_CONST.__objc_dictobj: 0x28
-  __DATA_CONST.__objc_floatobj: 0x10
-  __DATA.__objc_const: 0x132c8
-  __DATA.__objc_selrefs: 0x4c98
-  __DATA.__objc_ivar: 0xfec
-  __DATA.__objc_data: 0x3f20
+  __DATA.__objc_const: 0x13288
+  __DATA.__objc_selrefs: 0x4c90
+  __DATA.__objc_ivar: 0xff4
+  __DATA.__objc_data: 0x3ed0
   __DATA.__data: 0xa68
-  __DATA.__bss: 0x5f8
+  __DATA.__bss: 0x660
   - /System/Library/Frameworks/AVFoundation.framework/AVFoundation
   - /System/Library/Frameworks/Accelerate.framework/Accelerate
   - /System/Library/Frameworks/Contacts.framework/Contacts

   - /System/Library/PrivateFrameworks/MediaAnalysisPhotosServices.framework/MediaAnalysisPhotosServices
   - /System/Library/PrivateFrameworks/MediaAnalysisServices.framework/MediaAnalysisServices
   - /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
+  - /System/Library/PrivateFrameworks/PhotoLibraryServicesCore.framework/PhotoLibraryServicesCore
   - /System/Library/PrivateFrameworks/PhotosFormats.framework/PhotosFormats
   - /System/Library/PrivateFrameworks/PhotosIntelligence.framework/PhotosIntelligence
   - /System/Library/PrivateFrameworks/SensitiveContentAnalysisML.framework/SensitiveContentAnalysisML

   - /usr/lib/libcompression.dylib
   - /usr/lib/libobjc.A.dylib
   - /usr/lib/libsqlite3.dylib
-  Functions: 4479
-  Symbols:   713
-  CStrings:  8352
+  Functions: 4483
+  Symbols:   709
+  CStrings:  8366
 
Symbols:
+ _OBJC_CLASS_$_BMPECProcessed
- _CMTimeCopyAsDictionary
- _CMTimeRangeFromTimeToTime
- _CMTimeRangeGetEnd
- _CMTimeSubtract
- _OBJC_CLASS_$_NSConstantFloatNumber
CStrings:
+ "\x04\"\x11\x13"
+ "\x18"
+ "%!@(MISSING) Embedding generation disabled, skip deep sync"
+ "%!@(MISSING) Fetched %!l(MISSING)u assets by verified faces"
+ "%!@(MISSING) Fetched %!l(MISSING)u verified persons"
+ "%!@(MISSING) No face to add to Gallery; continuing to VU update ..."
+ "%!@(MISSING) Received request to query VU last full-mode cluster date (%!@(MISSING))"
+ "%!@(MISSING) VU index for Photo Library (%!@(MISSING)) %!@(MISSING) full-mode clustered (last clustered date: %!@(MISSING))"
+ "%!@(MISSING)[%!@(MISSING)] Asset already added to a processing batch; skipping"
+ "%!@(MISSING)[HomePod] Set xpc transaction exit clean"
+ "B32@0:8Q16@24"
+ "MADPhotosFaceFastPassProcessingTask_UVPersonalization"
+ "MADPhotosTaskProvider.activeAssetsManagementQueue"
+ "MediaAnalysisImagePriority1CheckpointWithFailureReportedTimestamp"
+ "MediaAnalysisImagePriority1TotalAssetCount"
+ "NumberOfAssetsHardFailureFullResource"
+ "NumberOfAssetsHardFailurePartialResource"
+ "NumberOfAssetsNoResourceFullResource"
+ "NumberOfAssetsNoResourcePartialResource"
+ "NumberOfAssetsSoftFailureFullResource"
+ "NumberOfAssetsSoftFailurePartialResource"
+ "PhotoLibraryClient_SignalAvailabilityStateChange"
+ "Priority %!l(MISSING)u"
+ "Resetting person process change tokens ... "
+ "Resetting person promoter progress key values ..."
+ "Resetting person promoter status ... "
+ "T@\"NSSet\",R,N,V_assetLocalIdentifiers"
+ "VSKDBUtil_ResetAnalysisVersion"
+ "VSKDBUtil_ResetAnalysisVersion"
+ "[%!@(MISSING)] Invalid task provider, mediaType %!l(MISSING)u, mediaSubtype %!l(MISSING)u, imageOnly %!d(MISSING)"
+ "[%!@(MISSING)] Update image asset with analysis type %!@(MISSING) (%!l(MISSING)lu), required type %!@(MISSING), isLivePhoto:%!@(MISSING), isImageOnly:%!@(MISSING)"
+ "[%!@(MISSING)] Update movie asset with analysis type %!@(MISSING) (%!l(MISSING)lu), required type %!@(MISSING), imageOnly:%!@(MISSING)"
+ "[%!@(MISSING)] updateImageAsset : required types is MediaAnalysisTypeNone; skip"
+ "[%!@(MISSING)][%!@(MISSING)] Long duration movie shall not be processed in the unified path; ignoring"
+ "[FaceModelBump][%!@(MISSING)] Failed to reset (%!d(MISSING))"
+ "[MAClientHandler][VUFullModeClusterDate]"
+ "[MADPhotosFullClusterProcessingTask] Embedding generation disabled, skip vector database rebuild and VU gallery update"
+ "[MADPhotosFullClusterProcessingTask] Failed to signal Photos availability state change: %!@(MISSING)"
+ "[MADPhotosFullClusterProcessingTask] Signalled Photos availability state change"
+ "[MADProgressManager] Failed to report failed-assets-precentage (%!d(MISSING)/%!d(MISSING)) for %!@(MISSING) - %!@(MISSING)"
+ "[MADProgressManager] Failed to report progress (%!d(MISSING) percent of %!d(MISSING)) for %!@(MISSING) (%!@(MISSING)) - %!@(MISSING)"
+ "[MADProgressManager] Failed to report progress (%!d(MISSING)/%!d(MISSING)) for %!@(MISSING) - %!@(MISSING)"
+ "[MADProgressManager] Reported failed-assets-percentage (%!d(MISSING)/%!d(MISSING)) for %!@(MISSING)"
+ "[MADProgressManager] Reported progress (%!d(MISSING) percent of %!d(MISSING)) for %!@(MISSING) (%!@(MISSING))"
+ "[MADProgressManager] Reported progress (%!d(MISSING)/%!d(MISSING)) for %!@(MISSING)"
+ "[MADProgressManager] unable to determine BGST identifier for task %!d(MISSING) (%!@(MISSING))"
+ "[MADProgressManagers] Total assets for %!@(MISSING) (%!@(MISSING)) equal to zero, skipping reporting"
+ "[MADProgressManagers] totalCount for %!@(MISSING) equal to zero, skipping reporting (%!d(MISSING)/%!d(MISSING))"
+ "[PECSingleAsset][%!@(MISSING)] getEncryptedSearchDomainsWithVisualQuery completed"
+ "[PECSingleAsset][%!@(MISSING)] getEncryptedSearchDomainsWithVisualQuery failed (%!@(MISSING))"
+ "[PECSingleAsset][%!@(MISSING)] getEncryptedSearchDomainsWithVisualQuery found no supported encrypted search domain"
+ "[PEC][%!@(MISSING)] getEncryptedSearchDomainsWithVisualQuery completed"
+ "[PEC][%!@(MISSING)] getEncryptedSearchDomainsWithVisualQuery failed (%!@(MISSING))"
+ "[PEC][%!@(MISSING)] getEncryptedSearchDomainsWithVisualQuery found no supported encrypted search domain"
+ "[VCPDatabaseWriter] Failed to remove enablement timestamp for %!@(MISSING)"
+ "[VSKDBMigration] Failed to signal Photos availability state change: %!@(MISSING)"
+ "[VSKDBMigration] Signalled Photos availability state change"
+ "[VSKDBMigration][%!@(MISSING)] Failed to reset (%!d(MISSING))"
+ "[VSKDBMigration][%!@(MISSING)] Media analysis database does not exist, skipping embedding clustering progress reset"
+ "[VSKDBMigration][%!@(MISSING)] Reset embedding clustering progress ... "
+ "[VSKDBUtil] Failed to reset mediaAnalysisImageVersion (%!l(MISSING)u assets) - %!@(MISSING)"
+ "[VSKDBUtil] Resetting mediaAnalysisImageVersion (%!l(MISSING)u assets)"
+ "[VSKDBUtil][%!@(MISSING)] Analysis missing Image Embedding"
+ "[VSKDBUtil][%!@(MISSING)] Analysis version %!d(MISSING) < min version for forward compatible embedding (%!d(MISSING))"
+ "[VSKDBUtil][%!@(MISSING)] Failed analysis missing Image Embedding (tracked)"
+ "_activeAssets"
+ "_activeAssetsManagementQueue"
+ "_assetLocalIdentifiers"
+ "_domainProcessedCounts"
+ "_domainSuccessesCounts"
+ "_migrateVectorDatabaseIfNeededWithError:"
+ "_reportCoreAnalyticsForSession"
+ "_reportCoreAnalyticsWithEntry:analyticManager:"
+ "_reportMediaAnalysisImageWorkloadProgress:totalAssetCount:forSubCategory:"
+ "_reportWorkloadProgressForTask:progressDetail:"
+ "_resetEmbeddingClusteringProgress"
+ "_signalPhotosAvailabilityStateChangeWithError:"
+ "assetLocalIdentifiers"
+ "assetsdClient"
+ "doneFullAnalysis:"
+ "encryptedSearchWithParsedVisualQuery:domain:completion:"
+ "getEncryptedSearchDomainsWithVisualQuery:cachedResults:completion:"
+ "hasMigration"
+ "initWithArtAssetProcessedCount:natureAssetProcessedCount:animalsAssetProcessedCount:birdsAssetProcessedCount:insectsAssetProcessedCount:reptilesAssetProcessedCount:mammalsAssetProcessedCount:landmarkAssetProcessedCount:naturalLandmarkProcessedAssetCount:mediaAssetProcessedCount:bookAssetProcessedCount:albumAssetProcessedCount:catsAssetProcessedCount:dogsAssetProcessedCount:apparelAssetProcessedCount:foodAssetProcessedCount:storefrontAssetProcessedCount:signSymbolAssetProcessedCount:laundryCareSymbolAssetProcessedCount:autoSymbolAssetProcessedCount:brandLogoSymbolAssetProcessedCount:object2DAssetProcessedCount:barcodeDetectionAssetProcessedCount:sculptureAssetProcessedCount:skylineAssetProcessedCount:artAssetSuccessesCount:natureAssetSuccessesCount:animalsAssetSuccessesCount:birdsAssetSuccessesCount:insectsAssetSuccessesCount:reptilesAssetSuccessesCount:mammalsAssetSuccessesCount:landmarkAssetSuccessesCount:naturalLandmarkSuccessesAssetCount:mediaAssetSuccessesCount:bookAssetSuccessesCount:albumAssetSuccessesCount:catsAssetSuccessesCount:dogsAssetSuccessesCount:apparelAssetSuccessesCount:foodAssetSuccessesCount:storefrontAssetSuccessesCount:signSymbolAssetSuccessesCount:laundryCareSymbolAssetSuccessesCount:autoSymbolAssetSuccessesCount:brandLogoSymbolAssetSuccessesCount:object2DAssetSuccessesCount:barcodeDetectionAssetSuccessesCount:sculptureAssetSuccessesCount:skylineAssetSuccessesCount:"
+ "is"
+ "is NOT"
+ "libraryInternalClient"
+ "localizedLabelDictionary"
+ "mad_calculateProgressPercentage:totalAssetCount:progressPercentageWithFailure:taskID:phTaskID:priority:failedAssetCount:error:"
+ "prioritized"
+ "queryVUIndexLastFullModeClusterDateWithPhotoLibraryURL:reply:"
+ "reportProgressForTaskWithName:withGlobalTarget:completed:atDate:category:subCategory:error:"
+ "reportProgressForTasks:"
+ "resultFromVISearchResults:"
+ "resultFromVISearchResults:entityStore:"
+ "signalAvailabilityStateDidChangeWithError:"
+ "taskWithAsset:andAnalysisTypes:andOptions:andProgressHandler:andCompletionHandler:"
+ "v32@0:8@\"NSURL\"16@?<v@?@\"NSDate\"@\"NSError\">24"
+ "v32@?0@\"NSArray\"8@\"VIParseResult\"16@\"NSError\"24"
+ "vcp_fullAnalysisImageOnlyTypes"
- "\x04\"\x11\x11"
- "\x16"
- "   [%!@(MISSING)] Ignoring analysis results for Montage asset"
- " Failed to complete highlight score update pass"
- "%!@(MISSING) Failed to query progress for %!@(MISSING)"
- "%!@(MISSING) Failed to report for %!@(MISSING) - %!@(MISSING)"
- "%!@(MISSING) Fetched %!d(MISSING) assets by verified faces"
- "%!@(MISSING) Fetched %!d(MISSING) verified persons"
- "%!@(MISSING) Fetched %!l(MISSING)u priority asset local identifiers."
- "%!@(MISSING) Fetched %!l(MISSING)u priority assets"
- "%!@(MISSING) Fetched %!l(MISSING)u priority assets."
- "%!@(MISSING) Fetching %!l(MISSING)u priority assets with fetchOptions: %!@(MISSING)"
- "%!@(MISSING) Ignoring analysis results for Montage asset"
- "%!@(MISSING) No face to add to Gallery; exit"
- "%!@(MISSING) Overwriting %!l(MISSING)u fetched assets."
- "%!@(MISSING) Perform priority asset fetch ..."
- "%!@(MISSING) Reported for %!@(MISSING) (%!d(MISSING)u/%!d(MISSING)u)"
- "%!@(MISSING) SystemTask is nil; skip reporting progress"
- "%!@(MISSING) totalCount for %!@(MISSING) equal to zero, skipping reporting (%!d(MISSING)u/%!d(MISSING)u)"
- "%!@(MISSING)_failed"
- "/Library/Caches/com.apple.xbs/Sources/MediaAnalysis/Daemon/Photos/VCPMovieHighlightProcessingTask.mm"
- "@\"BGSystemTask\""
- "@20@0:8B16"
- "@36@0:8Q16@24B32"
- "Finished resetting person promoter progress key values"
- "Priority %!d(MISSING)"
- "Resetting person promoter progress key values"
- "TB,N,V_captionOnly"
- "VCPMovieHighlightProcessingTask"
- "VCPMovieHighlightProcessingTask"
- "[%!@(MISSING)] Update Asset with MediaAnalysisImageCaptionResultsKey: %!@(MISSING)"
- "[%!@(MISSING)] Update Asset with MediaAnalysisVideoCaptionResultsKey: %!@(MISSING)"
- "[%!@(MISSING)] Update Asset with analysis type %!@(MISSING) (%!l(MISSING)lu)"
- "[%!@(MISSING)] Update image asset with caption only analysis type %!@(MISSING)"
- "[%!@(MISSING)] Update image only movie asset with caption only analysis type %!@(MISSING)"
- "[%!@(MISSING)] Update movie asset with caption only analysis type %!@(MISSING)"
- "[Highlight] %!d(MISSING) Assets Updated"
- "[Highlight] %!l(MISSING)u Assets Found"
- "[Highlight] Check outdated highlight results"
- "[Highlight] Fetched %!l(MISSING)u assets"
- "[Highlight] Fetching outdated highlight results"
- "[PECSingleAsset] Empty searchResult"
- "[PECSingleAsset][%!@(MISSING)] VI did not detect any supported domains"
- "[PECSingleAsset][%!@(MISSING)] parseWithVisualQuery completed"
- "[PECSingleAsset][%!@(MISSING)] parseWithVisualQuery failed (%!@(MISSING))"
- "[PEC] Empty searchResult"
- "[PEC][%!@(MISSING)] VI did not detect any supported domains"
- "[PEC][%!@(MISSING)] parseWithVisualQuery completed"
- "[PEC][%!@(MISSING)] parseWithVisualQuery failed (%!@(MISSING))"
- "[QuickFaceID][%!@(MISSING)] Ignoring analysis results for Montage asset"
- "[ReportProgress] Failed to report for %!@(MISSING) - %!@(MISSING)"
- "[ReportProgress] Reported for %!@(MISSING) (%!d(MISSING)u/%!d(MISSING)u)"
- "[ReportProgress] totalCount for %!@(MISSING) equal to zero, skipping reporting (%!d(MISSING)u/%!d(MISSING)u)"
- "[VSKDBUtil][%!@(MISSING)] Analysis version %!d(MISSING) < min version for valid embedding (%!d(MISSING))"
- "_captionOnly"
- "_reportCoreAnalyticsWithEntry:"
- "_systemTask"
- "addExistingPredicate:withNewPredicate:"
- "assetPriorityPredicates"
- "captionOnly"
- "duration >= %!l(MISSING)u && duration <= %!l(MISSING)u"
- "encryptedSearchWithParsedVisualQuery:completion:"
- "fetchPropertySetsIfNeeded"
- "isEligibleForEncryptedSearchWithCachedResults:"
- "lastObject"
- "localizedLabel"
- "mad_calculateProgressPercentage:progressPercentageWithFailure:taskID:phTaskID:priority:failedAssetCount:error:"
- "mediaTypePredicate:"
- "performPriorityAssetFetch"
- "priorityAssetIdentifiers:"
- "queryAndUpdateProgressForTask:forPhotoLibrary:reuseCachedValue:"
- "querying progress for task %!@(MISSING)"
- "reportProgress:systemTask:"
- "reportProgressTo:forTasks:"
- "reportTaskWorkloadProgress:completed:category:subCategory:error:"
- "resultFromVISearchResult:"
- "resultFromVISearchResult:entityStore:"
- "setCaptionOnly:"
- "setSystemTask:"
- "taskWithAsset:andAnalysisTypes:andOptions:andPetWatchDog:andProgressHandler:andCompletionHandler:"
- "updateProgressForPhotoLibrary:systemTask:cancelBlock:"
- "updateProgressForTask:forPhotoLibrary:andSystemTask:reuseCachedValue:"
- "useLegacyAssetFetch"
- "v32@?0@\"NSNumber\"8@\"NSDictionary\"16^B24"
- "vcp_isMontageWithTaskID:"
- "vcp_shortMovieDurationThreshold"

```
